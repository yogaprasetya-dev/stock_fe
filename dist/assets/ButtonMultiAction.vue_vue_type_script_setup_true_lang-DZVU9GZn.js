import{u as R,a4 as g,E as $,G as z,v as V,H as F,a5 as D,I as P,M as N,c,t as U,o as u,y as i,b as m,q as T,P as p,z as y,a6 as j,C as q,F as _}from"./index-BLGY9PiN.js";import{_ as k}from"./Icon.vue_vue_type_script_setup_true_lang-OILfUkaR.js";import{a as G}from"./DataTable.vue_vue_type_script_setup_true_lang-DoAMDiQ7.js";import{e as l}from"./index-CFjhT2rJ.js";const I={key:0,"component-wv":"ButtonMultiAction",class:"flex gap-3 items-center h-full w-full"},L={class:"text-xs"},Q=R({__name:"ButtonMultiAction",props:g({options:{default:()=>[]},class:{},selectedData:{default:()=>[]},tableName:{},totalRecords:{}},{selectedData:{default:()=>[]},selectedDataModifiers:{}}),emits:g(["update:selectedData"],["update:selectedData"]),setup(f,{emit:M}){const a=f,b=M;$(()=>{l.on("data-table:update-selected-data",x),l.on("data-table:update-total-record",w)}),z(()=>{l.off("data-table:update-total-record",w),l.off("data-table:update-selected-data",x)});const h=V(),o=F(f,"selectedData"),s=D(0),d=D(!1),S=P(()=>{var e;return((e=o.value)==null?void 0:e.length)&&s.value>0}),A=e=>{h.value.toggle(e)},C=()=>{d.value||(window.dispatchEvent(new CustomEvent("fetchAllData",{detail:a.tableName})),l.emit("data-table:select-all-record",{tableName:a.tableName}))},B=()=>{b("update:selectedData",[]),l.emit("data-table:clear-selected-data",{tableName:a.tableName})},x=e=>{e.tableName===a.tableName&&(o.value=e.data,b("update:selectedData",e.data??[]))},w=e=>{a.tableName===(e==null?void 0:e.tableName)&&(s.value=e==null?void 0:e.total)},E=e=>{let t=e.target;t.tagName==="UL"&&(t=t.parentElement);const{offsetHeight:n=0}=t,r=window.innerHeight*90/100;n>=r&&(t.style.transform="translateY(5vh)")};return N([o,s],([e,t])=>{d.value=(e==null?void 0:e.length)===t},{deep:!0}),N(()=>a.totalRecords,e=>s.value=e??0,{immediate:!0}),(e,t)=>{var n,r,v;return o.value&&((n=o.value)==null?void 0:n.length)>0?(u(),c("div",I,[i("button",{onClick:t[0]||(t[0]=H=>A(H)),class:"text-xs rounded-sm !px-2 bg-blue-400 text-white hover:bg-blue-500/60 hover:cursor-pointer shadow-md border-1 border-primary"},[t[1]||(t[1]=p(" Multi Action ")),m(k,{icon:"arrow-down-s"})]),m(G,{id:"multi-options-menu",ref_key:"menu",ref:h,pt:{root:{class:["!transition-transform !z-[7299] !w-max !min-w-40 !min-w-[110px] !max-h-[90vh] !overflow-y-auto !rounded-md !border-[1px] !border-solid !border-black !max-w-[400px] !translate-y-1 !shadow !overflow-hidden !bg-white !text-general-800"],list:{class:"!px-4"}}},model:a.options,onFocus:E,"append-to":"body","auto-z-index":"",popup:""},null,8,["model"]),i("span",L,y(`${(v=(r=o.value)==null?void 0:r.length)==null?void 0:v.toString()} data dipilih`),1),T(i("button",{onClick:C,class:q(`text-xs ${d.value?"hover:cursor-default":"hover:cursor-pointer"} text-primary`)},[d.value?(u(),c(_,{key:1},[p(" Semua data terpilih ")],64)):(u(),c(_,{key:0},[p(y(`Pilih Semua (${s.value} data)`),1)],64))],2),[[j,S.value]]),i("div",{onClick:B},[m(k,{icon:"close",class:"text-xl !h-full text-red-500"})])])):U("",!0)}}});export{Q as _};
