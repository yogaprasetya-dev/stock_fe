import{a as c,c as i}from"./index-MGwmnnen.js";import{am as p,an as u,ao as h,ap as A,aq as f}from"./index-BNjj_UGP.js";const m=i.apiURL,o=c.create({baseURL:`${m}/api/v1/`,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{const s=p();return s&&(e.headers.Authorization=`Bearer ${s}`),e});o.interceptors.response.use(e=>e,async e=>{var t,a,r;const s=e.config,n=((t=s==null?void 0:s.url)==null?void 0:t.startsWith("/api/v1/auth/login"))||((a=s==null?void 0:s.url)==null?void 0:a.startsWith("/api/v1/auth/refresh"));return((r=e.response)==null?void 0:r.status)===401&&!s._retry&&!n&&(s._retry=!0,u(),h(),A(),f.push("/auth/login")),Promise.reject(e)});export{o as A};
