import{_ as O}from"./DataTable.vue_vue_type_script_setup_true_lang-DU7Bh_T0.js";import{B}from"./brand.service-DzclouBH.js";import{_ as J}from"./Dialog.vue_vue_type_script_setup_true_lang-BwIWKMFo.js";import{e as y}from"./index-CFjhT2rJ.js";import{_ as L}from"./InputText.vue_vue_type_script_setup_true_lang-e6c03x4O.js";import{f as E}from"./data.utils-Cp1LBIu0.js";import{_ as H}from"./DialogConfirm.vue_vue_type_script_setup_true_lang-BHok5e_l.js";import{_ as I}from"./ButtonMultiAction.vue_vue_type_script_setup_true_lang-Cvyx0ufE.js";import{_ as $}from"./Button.vue_vue_type_script_setup_true_lang-C1Ovgw-s.js";import{_ as R}from"./api.service-Dgs1boU1.js";import{_ as j,a as z}from"./ButtonSearch.vue_vue_type_script_setup_true_lang-D-p7qWfa.js";import{u as V,v as d,a5 as q,y as K,K as Q,q as W,a6 as X,o as C,c as P,a7 as Y,z as h,b as u,M as Z,I as M,a4 as S,L as ee,w as G,F as ae,D as te,p as le,t as se,x as ie}from"./index-DOh3iN_U.js";import{_ as U}from"./DatePicker.vue_vue_type_script_setup_true_lang-DWsIWa76.js";import"./Icon.vue_vue_type_script_setup_true_lang-MXjzyZbO.js";import"./Animation-Bi2SbY78.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BE2iSHdx.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DO9keWeT.js";import"./index-HQkD5G-S.js";import"./index-CC8nIHWH.js";import"./index-__IG_7Gg.js";import"./auth.service-BxJEy6Ur.js";import"./index-LYmElTQ-.js";import"./index-4eifDWYF.js";import"./index-_ukIlSQ8.js";const re={class:"flex items-end justify-end gap-2","data-wv-section":"filteractionbuttons",style:{"grid-area":"2/4"}},ne=V({inheritAttrs:!1,__name:"BrandFilterFields",props:{tableName:{default:"product-table"}},emits:["apply"],setup(F,{emit:i}){const n=d(4),c=d(),m=d(),p=d(),s=d([]),a=d([]),_=q(!1),g=d(null),b=F,k=i;K(()=>{D(),y.on("show-filter",w)}),Q(()=>{y.off("show-filter",w)});const N=()=>{const l={};if(y.emit("multi-select:hide-overlay"),c.value&&c.value.length>0&&(l.brand=JSON.stringify(c.value)),m.value&&m.value.length>0&&(l.category=JSON.stringify(m.value)),p.value&&p.value.length>0&&(l.unit=JSON.stringify(p.value)),s.value&&s.value.length>0){const r=s.value[0]?new Date(s.value[0]):null,o=s.value[1]?new Date(s.value[1]):new Date(s.value[0]),v=[r];o&&v.push(o),l.updatedAt=JSON.stringify(v)}if(a.value&&a.value.length>0){const r=a.value[0]?new Date(a.value[0]):null,o=a.value[1]?new Date(a.value[1]):new Date(a.value[0]),v=[r];o&&v.push(o),l.createdAt=JSON.stringify(v)}y.emit("data-table:apply-filter",{tableName:b==null?void 0:b.tableName,filter:l}),y.emit("data-table:clear-selected-data",{tableName:b==null?void 0:b.tableName}),k==null||k("apply",l)},A=()=>{s.value=[],a.value=[]},w=l=>{l.tableName===b.tableName&&(_.value=l.show)},D=()=>{if(g.value){const{children:l}=g.value,r=g.value.childElementCount,o=r%n.value;let[v,e]=[1,1];for(const t in Array.from({length:r})){const x=Number(t)===r-1;l[t].setAttribute("style",`grid-area: ${v}/${x&&o?n.value:e}`),++e>n.value&&(e=1,v++)}}};return(l,r)=>W((C(),P("div",{ref_key:"container",ref:g,class:"grid gap-4 py-2 bg-[#5080e1]/10 rounded-md px-3",style:Y(`grid-template-columns: repeat(${n.value}, 1fr)`)},[h("div",null,[u(U,{"model-value":s.value,"onUpdate:modelValue":r[0]||(r[0]=o=>s.value=o),label:"Terakhir Diubah",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),h("div",null,[u(U,{"model-value":a.value,"onUpdate:modelValue":r[1]||(r[1]=o=>a.value=o),label:"Dibuat Pada",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),h("div",re,[u($,{onClick:A,label:"Bersihkan Fields","data-wv-section":"clearbutton",severity:"secondary",class:"text-xs"}),u($,{onClick:N,label:"Terapkan Filter","data-wv-section":"applybutton",severity:"success",class:"text-xs"})])],4)),[[X,_.value]])}}),oe={class:"flex flex-col gap-2 text-black"},ue={class:"flex flex-col gap-2"},de={class:"flex flex-row justify-start gap-2"},ce={class:"w-full flex justify-end gap-2"},me={class:"w-full"},Pe=V({__name:"BrandView",setup(F){const i=d({visible:!1,type:"add",header:"",useStay:!1}),n=Z(),c=d(),m=d(),p=d([]),s=d([]),a=d({visible:!1,header:"",severity:"success",confirmButtonSeverity:"success"}),_=M(()=>p.value.length>0),g=M(()=>[{label:"Edit",icon:"edit",visible:S("brand").update,command:()=>{var e;i.value={visible:!0,type:"edit",header:"Edit Merek",useStay:!1},c.value=(e=m.value)==null?void 0:e.name}},{label:"Hapus",icon:"delete-bin",danger:!0,visible:S("brand").delete,command:()=>{s.value=[m.value],a.value={visible:!0,header:"Hapus Merek",severity:"success",confirmButtonSeverity:"success",message:"Apakah kamu yakin ingin menghapus merek ini?",list:s.value.map(e=>e.name),confirmLabel:"Hapus",actionable:!0}}}]),b=M(()=>[{label:"Hapus",icon:"delete-bin",visible:S("brand").delete,danger:!0,command:()=>{s.value=p.value,a.value={visible:!0,header:"Edit Merek",severity:"success",confirmButtonSeverity:"success",message:"Apakah kamu yakin ingin mengubah merek ini?",list:s.value.map(e=>e.name),confirmLabel:"Ubah",actionable:!0}}}]),k=[{header:"Merek",field:"name",sortable:!0},{header:"Terakhir Diubah",field:"updatedAt",sortable:!0,bodyTemplate:e=>e.updatedAt?E(new Date(e.updatedAt)):"-"},{header:"Dibuat Pada",field:"createdAt",sortable:!0,bodyTemplate:e=>e.createdAt?E(new Date(e.createdAt)):"-"}],N=()=>{i.value={visible:!0,type:"add",header:"Tambah Merek"}},A=async e=>{try{const{data:t}=await B.getBrand(e);return t}catch(t){console.error("Error fetching data:",t)}},w=e=>{i.value.type==="add"?r():i.value.type==="edit"&&o()},D=async()=>{await v(s.value.map(e=>e.id))},l=()=>{c.value=void 0},r=async()=>{try{if(!c.value){n.add({severity:"error",summary:"Gagal",detail:"Nama merek tidak boleh kosong",life:3e3});return}const e={name:c.value};await B.createBrand(e),l(),i.value.visible=!1,n.add({severity:"success",summary:"Sukses",detail:"Berhasil menambah merek",life:3e3}),y.emit("data-table:update",{tableName:"table-brand"})}catch(e){console.error("Error creating brand:",e),n.add({severity:"error",summary:"Gagal",detail:"Gagal menambah merek",life:3e3})}},o=async()=>{try{if(!c.value||!m.value){n.add({severity:"error",summary:"Gagal",detail:"Nama merek harus diisi",life:3e3});return}await B.updateBrand(m.value.id,{name:c.value}),l(),i.value.visible=!1,n.add({severity:"success",summary:"Sukses",detail:"Berhasil mengubah merek",life:3e3}),y.emit("data-table:update",{tableName:"table-brand"})}catch(e){console.error("Error updating brand:",e),n.add({severity:"error",summary:"Gagal",detail:"Gagal mengubah merek",life:3e3})}},v=async e=>{try{const t={id:e};await B.deleteBrand(t),a.value.visible=!1,n.add({severity:"success",summary:"Sukses",detail:"Berhasil menghapus merek",life:3e3}),y.emit("data-table:update",{tableName:"table-brand"})}catch(t){console.error("Error deleting brand:",t),n.add({severity:"error",summary:"Gagal",detail:"Gagal menghapus merek",life:3e3})}};return ee(()=>i.value.visible,()=>{i.value.visible||(l(),m.value=void 0,p.value=[])},{immediate:!0}),(e,t)=>{var x,T;return C(),P(ae,null,[u(R,null,{default:G(()=>[h("div",oe,[h("div",ue,[h("div",de,[u(I,{options:b.value,class:te(`${_.value?"flex":"!hidden"} h-[21px] w-[120px]`)},null,8,["options","class"]),h("div",ce,[u(j,{"table-name":"table-brand"}),u(z,{"table-name":"table-brand"}),ie(S)("brand").create?(C(),le($,{key:0,onClick:N,label:"Tambah Merek",severity:"primary",class:"text-xs"})):se("",!0)])]),u(ne,{"table-name":"table-brand"}),u(O,{"data-key":"id","fetch-function":A,columns:k,options:g.value,onToggleOption:t[0]||(t[0]=f=>m.value=f),"onUpdate:selectedData":t[1]||(t[1]=f=>p.value=f),"table-name":"table-brand","selection-type":"checkbox","use-paginator":""},null,8,["options"])])])]),_:1}),u(J,{visible:i.value.visible,"onUpdate:visible":[t[3]||(t[3]=f=>i.value.visible=f),i.value.visible],header:(x=i.value)==null?void 0:x.header,class:"w-[400px] !bg-white !border-none text-black","use-stay":(T=i.value)==null?void 0:T.useStay,"use-close":!0,closable:!1,onSubmit:w},{default:G(()=>[h("div",me,[u(L,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=f=>c.value=f),label:"Nama Merek",placeholder:"Masukkan nama merek"},null,8,["modelValue"])])]),_:1},8,["visible","header","use-stay","onUpdate:visible"]),u(H,{visible:a.value.visible,"onUpdate:visible":t[4]||(t[4]=f=>a.value.visible=f),onConfirm:D,header:a.value.header,"header-icon":"check",list:a.value.list,message:a.value.message,severity:a.value.severity,"confirm-button-severity":a.value.confirmButtonSeverity},null,8,["visible","header","list","message","severity","confirm-button-severity"])],64)}}});export{Pe as default};
