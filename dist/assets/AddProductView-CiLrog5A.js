import{_ as I}from"./api.service-Dgs1boU1.js";import{_ as g}from"./Dropdown.vue_vue_type_script_setup_true_lang-6IRzW13W.js";import{_ as y}from"./InputText.vue_vue_type_script_setup_true_lang-e6c03x4O.js";import{P as V}from"./product.service-8g3w9OI2.js";import{u as $,y as K,M as T,v as s,p as j,w as D,o as N,z as o,b as d,E as G}from"./index-DOh3iN_U.js";import{B as H}from"./brand.service-DzclouBH.js";import{C as F}from"./category.service-DKdRWdqU.js";import{U as R}from"./unit.service-Ck8PLPrx.js";import{g as z}from"./data.utils-Cp1LBIu0.js";import{_ as A}from"./Checkbox.vue_vue_type_script_setup_true_lang-BE2iSHdx.js";import"./auth.service-BxJEy6Ur.js";import"./index-HQkD5G-S.js";import"./index-CC8nIHWH.js";import"./index-__IG_7Gg.js";import"./index-QsIXXSH_.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DO9keWeT.js";const q={class:"flex flex-col p-4 gap-3"},J={class:"flex items-center gap-10"},L={class:"w-[460px]"},Q={class:"w-[460px]"},W={class:"flex items-center gap-10"},X={class:"w-[460px]"},Y={class:"w-[460px]"},Z={class:"flex items-center gap-10"},ee={class:"w-[460px]"},ae={class:"w-[460px]"},re={class:"flex justify-end pt-8"},oe={class:"flex flex-col gap-4 items-end"},be=$({__name:"AddProductView",setup(te){K(()=>{P(),M(),C(),E()});const O=G(),t=T(),h=s(0),u=s(),m=s(),c=s(),l=s(),i=s(),n=s(),f=s(!1),k=s(),x=s(),b=s(),_=()=>{O.push("/product/data")},p=()=>{var r,e,a;u.value=z(h.value,(r=l.value)==null?void 0:r.id,(e=i.value)==null?void 0:e.id,(a=n.value)==null?void 0:a.id)},w=()=>{m.value=void 0,l.value=void 0,c.value=void 0,i.value=void 0,n.value=void 0,p()},P=async()=>{var r,e;try{const{data:a}=await V.getProductIndex();h.value=a.data.nextIndex,p()}catch(a){t.add({severity:"error",summary:"Error",detail:`Gagal memuat indeks produk: ${((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},M=async()=>{var r,e;try{const{data:a}=await H.getBrandDropdown();k.value=a.data}catch(a){t.add({severity:"error",summary:"Error",detail:`Gagal memuat data merek: ${((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},C=async()=>{var r,e;try{const{data:a}=await F.getCategoryDropdown();x.value=a.data}catch(a){t.add({severity:"error",summary:"Error",detail:`Gagal memuat data kategori: ${((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},E=async()=>{var r,e;try{const{data:a}=await R.getUnitDropdown();b.value=a.data}catch(a){t.add({severity:"error",summary:"Error",detail:`Gagal memuat data satuan: ${((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},S=async()=>{var r,e,a,U,B;try{if(!m.value){t.add({severity:"error",summary:"Error",detail:"Nama produk harus diisi",life:3e3});return}if(!l.value){t.add({severity:"error",summary:"Error",detail:"Merek harus dipilih",life:3e3});return}if(!i.value){t.add({severity:"error",summary:"Error",detail:"Kategori harus dipilih",life:3e3});return}if(!n.value){t.add({severity:"error",summary:"Error",detail:"Satuan harus dipilih",life:3e3});return}if(!u.value){t.add({severity:"error",summary:"Error",detail:"Kode produk harus diisi",life:3e3});return}const v={name:m.value,description:c.value,brandId:(r=l.value)==null?void 0:r.id,categoryId:(e=i.value)==null?void 0:e.id,unitId:(a=n.value)==null?void 0:a.id,code:u.value};await V.createProduct(v),t.add({severity:"success",summary:"Sukses",detail:"Produk berhasil dibuat",life:3e3}),f.value?(w(),P()):_()}catch(v){console.error("Error creating product:",v),t.add({severity:"error",summary:"Gagal",detail:v?(B=(U=v.response)==null?void 0:U.data)==null?void 0:B.message:"Terjadi kesalahan saat membuat produk",life:3e3})}};return(r,e)=>(N(),j(I,null,{default:D(()=>[o("div",q,[o("div",J,[o("div",L,[d(y,{"model-value":u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),label:"Kode Produk",placeholder:"Kode produk",disabled:""},null,8,["model-value"])]),o("div",Q,[d(y,{"model-value":m.value,"onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),label:"Nama Produk",placeholder:"Masukkan Nama Produk",onBlur:e[2]||(e[2]=()=>{})},null,8,["model-value"])])]),o("div",W,[o("div",X,[d(y,{"model-value":c.value,"onUpdate:modelValue":e[3]||(e[3]=a=>c.value=a),label:"Deskripsi Produk",placeholder:"Masukkan Deskripsi Produk",mandatory:!1,optional:!0,onBlur:e[4]||(e[4]=()=>{})},null,8,["model-value"])]),o("div",Y,[d(g,{"model-value":l.value,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value=a),placeholder:"Pilih Merek",label:"Merek",options:k.value,onOpen:M,onHide:p},null,8,["model-value","options"])])]),o("div",Z,[o("div",ee,[d(g,{"model-value":i.value,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value=a),placeholder:"Pilih Kategori",label:"Kategori",options:x.value,onOpen:C,onHide:p},null,8,["model-value","options"])]),o("div",ae,[d(g,{"model-value":n.value,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value=a),placeholder:"Pilih Satuan",label:"Satuan",options:b.value,onOpen:E,onHide:p},null,8,["model-value","options"])])]),o("div",re,[o("div",oe,[d(A,{"model-value":f.value,"onUpdate:modelValue":e[8]||(e[8]=a=>f.value=a),label:"Tetap di sini?"},null,8,["model-value"]),o("div",{class:"flex gap-2"},[o("button",{onClick:_,class:"text-xs rounded-sm !px-2 !py-1 bg-black text-white hover:bg-black/60 hover:cursor-pointer shadow-md border-1 border-gray-600"}," Kembali "),o("button",{onClick:w,class:"text-xs rounded-sm !px-2 !py-1 bg-transparent text-red-500 hover:bg-red-500/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-red-500"}," Bersihkan Field "),o("button",{onClick:S,class:"text-xs rounded-sm !px-2 !py-1 bg-green-400 text-white hover:bg-green-400/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-green-500"}," Submit ")])])])])]),_:1}))}});export{be as default};
