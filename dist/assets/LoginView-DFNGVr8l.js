import{u as g,N as h,v as u,c as v,y as t,b as n,O as c,o as x,D as b,Q as w,S as y}from"./index-BgBP_tks.js";import{A as _}from"./Animation-CNJnx7S1.js";import{_ as k}from"./InputPassword.vue_vue_type_script_setup_true_lang-CNgv6zlP.js";import{_ as L}from"./InputText.vue_vue_type_script_setup_true_lang-DgR1zIqT.js";import{c as S,a as V}from"./index-D-6hEweM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-nwuTL028.js";import"./index-CID7Xlg7.js";import"./index-CT6Daovv.js";const A=S.apiURL,i=V.create({baseURL:`${A}/api/v1/`,headers:{"Content-Type":"application/json"},withCredentials:!0}),E={login:o=>i.post("auth/login",o),refresh:o=>i.post("auth/refresh",o,{withCredentials:!0}),logout:()=>i.post("auth/logout")},R={class:"bg-login h-screen w-full bg-cover bg-center text-black"},T={class:"flex items-center justify-center h-screen"},U={class:"w-[300px] h-[350px] lg:w-[800px] lg:h-[400px] bg-white rounded-[20px]"},B={class:"grid grid-cols-1 lg:grid-cols-2 h-full"},C={class:"w-full h-full flex flex-col gap-4 py-5 px-4 lg:px-8"},G=g({__name:"LoginView",setup(o){const m=b(),d=h(),s=u(),r=u(),p=async()=>{var l,a;try{if(!s.value){alert("Please enter your email or username");return}if(!r.value){alert("Please enter your password");return}const e=await E.login({identifier:s.value,password:r.value}),f={id:e.data.data.id,name:e.data.data.name,email:e.data.data.email,username:e.data.data.username,role:e.data.data.role,permissions:e.data.data.permissions,photo:e.data.data.photo};w(e.data.data.accessToken),y(e.data.data.refreshToken),localStorage.setItem("user",JSON.stringify(f)),d.add({severity:"success",summary:"Login Successful",detail:"Redirecting to dashboard...",life:2e3}),m.push("/dashboard").then(()=>{window.location.reload()})}catch(e){console.error("Error during login:",e),d.add({severity:"error",summary:"Login Failed",detail:e?(a=(l=e.response)==null?void 0:l.data)==null?void 0:a.message:"Gagal login, silakan coba lagi",life:3e3})}};return(l,a)=>(x(),v("div",R,[t("div",T,[t("div",U,[t("div",B,[n(_,{animation:"login",class:"lg:w-[400px] w-[100px] lg:block hidden",onContextmenu:a[0]||(a[0]=c(()=>{},["prevent"]))}),t("div",C,[a[4]||(a[4]=t("div",{class:"flex flex-col items-center justify-center gap-4"},[t("span",{class:"text-2xl font-bold"},"Endang Stock"),t("span",{class:"text-xl font-semibold"},"Login")],-1)),t("form",{class:"flex flex-col gap-6 p-3",onSubmit:c(p,["prevent"])},[t("div",null,[n(L,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value=e),label:"Email or Username",placeholder:"Enter your email or username"},null,8,["modelValue"])]),t("div",null,[n(k,{"model-value":r.value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e)},null,8,["model-value"])]),a[3]||(a[3]=t("button",{type:"submit",class:"bg-black text-white text-sm rounded-md font-semibold p-2 w-full mt-4 hover:bg-gray-800 hover:cursor-pointer transition duration-200"}," Login ",-1))],32)])])])])]))}});export{G as default};
