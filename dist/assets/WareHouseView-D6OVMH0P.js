import{_ as R}from"./DataTable.vue_vue_type_script_setup_true_lang-sOjexovF.js";import{_ as L}from"./Breadcrumb.vue_vue_type_script_setup_true_lang-CzJ3Nmey.js";import{S as O}from"./store.service-CPgNDD4g.js";import{_ as P}from"./Button.vue_vue_type_script_setup_true_lang-2TrklThR.js";import{_ as q}from"./Dialog.vue_vue_type_script_setup_true_lang-C4SwWx6D.js";import{_ as W}from"./DialogConfirm.vue_vue_type_style_index_0_lang-C5_82pQK.js";import{_ as j}from"./InputText.vue_vue_type_script_setup_true_lang-OxSdNUG8.js";import{e as y}from"./index-CFjhT2rJ.js";import{f as M}from"./data.utils-eGwCzW_2.js";import{_ as I}from"./Card.vue_vue_type_script_setup_true_lang-BOCibx2r.js";import{S as G}from"./stock.service-CbFR1KTv.js";import{u as J,v as s,a6 as z,G as K,M as Q,q as X,a7 as Y,o as C,c as H,a8 as Z,y as u,b as r,O as ee,J as ae,L as V,N as te,w as U,F as le,p as oe,t as se,x as re,E as ie}from"./index-BGhEJGBM.js";import{_ as ne}from"./Badge.vue_vue_type_script_setup_true_lang-C6Q4mrOw.js";import{_ as ue,a as de}from"./ButtonSearch.vue_vue_type_script_setup_true_lang-Db7FYHWh.js";import{_ as E}from"./DatePicker.vue_vue_type_script_setup_true_lang-CUP7g0mX.js";import{_ as D}from"./MultiSelect.vue_vue_type_script_setup_true_lang-DBejvdAy.js";import"./Icon.vue_vue_type_script_setup_true_lang-CaTtpYxS.js";import"./Animation-D7axXRzZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BJx-ahA-.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DYbcOFbB.js";import"./index-vx55ZWHK.js";import"./index-BweVj9b9.js";import"./index-BeR49MAt.js";import"./api.service-Cu4WKU11.js";import"./index-MGwmnnen.js";import"./index-C6Gu924b.js";import"./index-C0mE0xBy.js";import"./index-B3Anr8dw.js";import"./index-WWgKsfq7.js";const ce={class:"!overflow-hidden"},me={class:"!overflow-hidden"},ve={class:"!overflow-hidden"},pe={class:"!overflow-hidden"},fe={class:"!overflow-hidden"},be={class:"flex items-end justify-end gap-2","data-wv-section":"filteractionbuttons",style:{"grid-area":"2/4"}},he=J({inheritAttrs:!1,__name:"WareHouseFilterFields",props:{tableName:{default:"product-table"}},emits:["apply"],setup(F,{emit:i}){const g=s(4),n=s(),o=s(),d=s(),_=s([]),c=s([]),k=s([{label:"Aktif",value:"active"},{label:"Tidak Aktif",value:"inactive"}]),m=s([]),v=s([]),$=z(!1),w=s(null),b=F,S=i;K(()=>{B(),y.on("show-filter",N)}),Q(()=>{y.off("show-filter",N)});const A=()=>{const l={};if(y.emit("multi-select:hide-overlay"),n.value&&n.value.length>0&&(l.brand=JSON.stringify(n.value)),o.value&&o.value.length>0&&(l.product=JSON.stringify(o.value)),d.value&&d.value.length>0&&(l.status=JSON.stringify(d.value)),m.value&&m.value.length>0){const t=m.value[0]?new Date(m.value[0]):null,e=m.value[1]?new Date(m.value[1]):new Date(m.value[0]),a=[t];e&&a.push(e),l.updatedAt=JSON.stringify(a)}if(v.value&&v.value.length>0){const t=v.value[0]?new Date(v.value[0]):null,e=v.value[1]?new Date(v.value[1]):new Date(v.value[0]),a=[t];e&&a.push(e),l.createdAt=JSON.stringify(a)}y.emit("data-table:apply-filter",{tableName:b==null?void 0:b.tableName,filter:l}),y.emit("data-table:clear-selected-data",{tableName:b==null?void 0:b.tableName}),S==null||S("apply",l)},T=()=>{n.value=[],o.value=[],d.value=[],m.value=[],v.value=[]},N=l=>{l.tableName===b.tableName&&($.value=l.show)},B=()=>{if(w.value){const{children:l}=w.value,t=w.value.childElementCount,e=t%g.value;let[a,p]=[1,1];for(const h in Array.from({length:t})){const f=Number(h)===t-1;l[h].setAttribute("style",`grid-area: ${a}/${f&&e?g.value:p}`),++p>g.value&&(p=1,a++)}}},x=async l=>{try{let t={};l==="brand"&&(t.brand=JSON.stringify(!0)),l==="product"&&(t.product=JSON.stringify(!0)),l==="status"&&(k.value=[{label:"Tersedia",value:"available"},{label:"Stok Rendah",value:"lowStock"},{label:"Habis",value:"outOfStock"}]);const{data:e}=await G.getWarehouseOptions(t);l==="brand"&&(_.value=e.data.brand),l==="product"&&(c.value=e.data.product)}catch(t){console.error("Error fetching filter options:",t)}};return(l,t)=>X((C(),H("div",{ref_key:"container",ref:w,class:"grid gap-4 py-2 bg-[#5080e1]/10 rounded-md px-3",style:Z(`grid-template-columns: repeat(${g.value}, 1fr)`)},[u("div",ce,[r(D,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),options:c.value,onShow:t[1]||(t[1]=e=>x("product")),controls:"",label:"Produk",placeholder:"Pilih Produk","option-label":"label","option-value":"value"},null,8,["modelValue","options"])]),u("div",me,[r(D,{modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),options:_.value,onShow:t[3]||(t[3]=e=>x("brand")),controls:"",label:"Brand",placeholder:"Pilih Brand","option-label":"label","option-value":"value"},null,8,["modelValue","options"])]),u("div",ve,[r(D,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value=e),options:k.value,onShow:t[5]||(t[5]=e=>x("status")),controls:"",label:"Status",placeholder:"Pilih Status","option-label":"label","option-value":"value"},null,8,["modelValue","options"])]),u("div",pe,[r(E,{"model-value":m.value,"onUpdate:modelValue":t[6]||(t[6]=e=>m.value=e),label:"Terakhir Diubah",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),u("div",fe,[r(E,{"model-value":v.value,"onUpdate:modelValue":t[7]||(t[7]=e=>v.value=e),label:"Dibuat Pada",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),u("div",be,[r(P,{onClick:T,label:"Bersihkan Fields","data-wv-section":"clearbutton",severity:"secondary",class:"text-xs"}),r(P,{onClick:A,label:"Terapkan Filter","data-wv-section":"applybutton",severity:"success",class:"text-xs"})])],4)),[[Y,$.value]])}}),ye={id:"main-view",class:"bg-[#eeedf2] w-full overflow-y-hidden"},ge={class:"flex flex-col gap-2 p-4"},ke={class:"flex flex-col gap-2 text-black"},we={class:"flex flex-col gap-2"},_e={class:"flex flex-row justify-start gap-2"},Se={class:"w-full flex justify-end gap-2"},xe={class:"w-full"},aa=J({__name:"WareHouseView",setup(F){const i=s({visible:!1,type:"add",header:"Tambah Kategori",useStay:!1}),g=ie(),n=ee(),o=s(),d=s(),_=s([]),c=s({visible:!1,header:"",severity:"success",confirmButtonSeverity:"success"}),k=s([]),m=ae(()=>[{label:"Edit",icon:"edit",visible:V("warehouse_stock").update,command:()=>{var e;i.value={visible:!0,type:"edit",header:"Edit Toko",useStay:!1},o.value=(e=d.value)==null?void 0:e.name}},{label:"Hapus",icon:"delete-bin",danger:!0,visible:V("warehouse_stock").delete,command:()=>{k.value=[d.value],c.value={visible:!0,header:"Hapus Toko",severity:"success",confirmButtonSeverity:"success",message:"Apakah kamu yakin ingin menghapus toko ini?",list:k.value.map(e=>e.name),confirmLabel:"Hapus",actionable:!0}}}]),v=[{header:"Produk",field:"product.name",sortable:!0,bodyTemplate:e=>e.product?e.product.name:"-"},{header:"Merek",field:"product.brand.name",sortable:!0,bodyTemplate:e=>{var a,p,h;return(a=e.product)!=null&&a.brand?(h=(p=e.product)==null?void 0:p.brand)==null?void 0:h.name:"-"}},{header:"Jumlah",field:"quantity",sortable:!0,bodyTemplate:e=>e.quantity!==void 0?e.quantity.toString():"-"},{header:"Status",field:"status",sortable:!0,bodyComponent:e=>{var a,p;return{component:ne,props:{label:((a=b(e.status))==null?void 0:a.charAt(0).toUpperCase())+((p=b(e.status))==null?void 0:p.slice(1)),severity:w(e.status)}}}},{header:"Terakhir Diubah",field:"updatedAt",sortable:!0,bodyTemplate:e=>e.updatedAt?M(new Date(e.updatedAt)):"-"},{header:"Dibuat Pada",field:"createdAt",sortable:!0,bodyTemplate:e=>e.createdAt?M(new Date(e.createdAt)):"-"}],$=[{name:"Gudang",route:"/warehouse"}],w=e=>{switch(e){case"outOfStock":return"danger";case"lowStock":return"warning";default:return"success"}},b=e=>{switch(e){case"outOfStock":return"Habis";case"lowStock":return"Stok Rendah";default:return"Tersedia"}},S=()=>{g.push("/manage-product/product-in/add")},A=e=>{i.value.type==="add"?B():i.value.type==="edit"&&x()},T=async()=>{await l(k.value.map(e=>e.id))},N=async e=>{try{const{data:a}=await G.getWarehouseStock(e);return a}catch(a){console.error("Error fetching store data:",a)}},B=async()=>{try{if(!o.value)return;await O.createStore({name:o.value}),i.value.visible=!1,o.value="",n.add({severity:"success",summary:"Sukses",detail:"Berhasil menambah toko",life:3e3}),y.emit("data-table:update",{tableName:"table-store"})}catch(e){console.error("Error creating store:",e),n.add({severity:"error",summary:"Gagal",detail:"Gagal menambah toko",life:3e3})}},x=async()=>{try{if(!o.value||!d.value)return;await O.updateStore(d.value.id,{name:o.value}),i.value.visible=!1,o.value="",n.add({severity:"success",summary:"Sukses",detail:"Berhasil mengubah toko",life:3e3}),y.emit("data-table:update",{tableName:"table-store"})}catch(e){console.error("Error updating store:",e),n.add({severity:"error",summary:"Gagal",detail:"Gagal mengubah toko",life:3e3})}},l=async e=>{try{const a={id:e};await O.deleteStore(a),c.value.visible=!1,_.value=[],n.add({severity:"success",summary:"Berhasil",detail:"Berhasil menghapus toko",life:3e3}),y.emit("data-table:update",{tableName:"table-store"})}catch(a){console.error("Error deleting store:",a),n.add({severity:"error",summary:"Gagal",detail:"Gagal menghapus toko",life:3e3})}},t=()=>{o.value=void 0};return te(()=>i.value.visible,()=>{i.value.visible||t()},{immediate:!0}),(e,a)=>{var p,h;return C(),H(le,null,[u("div",ye,[u("div",ge,[r(L,{menus:$}),r(I,null,{default:U(()=>[u("div",ke,[u("div",we,[u("div",_e,[u("div",Se,[r(ue,{"table-name":"table-warehouse"}),r(de,{"table-name":"table-warehouse"}),re(V)("warehouse_stock").create?(C(),oe(P,{key:0,onClick:S,label:"Tambah Stok",severity:"primary",class:"text-xs"})):se("",!0)])]),r(he,{"table-name":"table-warehouse"}),r(R,{"data-key":"id","fetch-function":N,columns:v,options:m.value,onToggleOption:a[0]||(a[0]=f=>d.value=f),"onUpdate:selectedData":a[1]||(a[1]=f=>_.value=f),"table-name":"table-warehouse","selection-type":"single","use-paginator":"","use-options":!1},null,8,["options"])])])]),_:1})])]),r(q,{visible:i.value.visible,"onUpdate:visible":[a[3]||(a[3]=f=>i.value.visible=f),i.value.visible],header:(p=i.value)==null?void 0:p.header,class:"w-[400px] !bg-white !border-none text-black","use-stay":(h=i.value)==null?void 0:h.useStay,"use-close":!0,closable:!1,onSubmit:A},{default:U(()=>[u("div",xe,[r(j,{modelValue:o.value,"onUpdate:modelValue":a[2]||(a[2]=f=>o.value=f),label:"Nama Toko",placeholder:"Masukkan nama toko"},null,8,["modelValue"])])]),_:1},8,["visible","header","use-stay","onUpdate:visible"]),r(W,{visible:c.value.visible,"onUpdate:visible":a[4]||(a[4]=f=>c.value.visible=f),onConfirm:T,header:c.value.header,"header-icon":"check",list:c.value.list,message:c.value.message,severity:c.value.severity,"confirm-button-severity":c.value.confirmButtonSeverity},null,8,["visible","header","list","message","severity","confirm-button-severity"])],64)}}});export{aa as default};
