import{_ as p}from"./Button.vue_vue_type_script_setup_true_lang-C1Ovgw-s.js";import{_ as g}from"./api.service-Dgs1boU1.js";import{_ as U}from"./Dropdown.vue_vue_type_script_setup_true_lang-6IRzW13W.js";import{_ as x}from"./FileUpload.vue_vue_type_script_setup_true_lang--lqHwBVE.js";import{_ as w}from"./InputPassword.vue_vue_type_script_setup_true_lang-DvSZWWFt.js";import{_ as c}from"./InputText.vue_vue_type_script_setup_true_lang-e6c03x4O.js";import{U as V}from"./user.service-o5zC87Vg.js";import{u as M,M as E,y as R,v as r,p as $,w as B,o as C,z as s,b as l,E as N}from"./index-DOh3iN_U.js";import{R as S}from"./role.service-Cps6zKxP.js";import"./auth.service-BxJEy6Ur.js";import"./index-HQkD5G-S.js";import"./index-CC8nIHWH.js";import"./index-__IG_7Gg.js";import"./index-QsIXXSH_.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DO9keWeT.js";import"./index-LYmElTQ-.js";import"./index-4eifDWYF.js";import"./index-BAxbCUjW.js";const P={class:"flex flex-col"},F={class:"grid grid-cols-2 gap-2"},G={class:"pr-4"},O={class:""},j={class:"pr-4"},z={class:""},A={class:"flex flex-col gap-2 pr-4"},D={class:"flex justify-end mt-4 gap-2"},ie=M({__name:"AddUserView",setup(T){const o=E(),f=N();R(()=>{k()});const d=r(),u=r(),n=r(),m=r(),t=r(),v=r(),_=r(),h=()=>{f.push("/settings/users")},y=()=>{d.value=void 0,u.value=void 0,n.value=void 0,m.value=void 0,t.value=void 0,v.value=void 0},k=async()=>{try{const{data:i}=await S.getRoleDropdown();_.value=i.data}catch{o.add({severity:"error",summary:"Error",detail:"Gagal memuat data role",life:3e3})}},b=async()=>{var i;try{if(!d.value){o.add({severity:"error",summary:"Error",detail:"Nama harus diisi",life:3e3});return}if(!u.value){o.add({severity:"error",summary:"Error",detail:"Username harus diisi",life:3e3});return}if(!n.value){o.add({severity:"error",summary:"Error",detail:"Email harus diisi",life:3e3});return}if(!m.value){o.add({severity:"error",summary:"Error",detail:"Password harus diisi",life:3e3});return}if(!v.value){o.add({severity:"error",summary:"Error",detail:"Role harus dipilih",life:3e3});return}const e={name:d.value,username:u.value,email:n.value,password:m.value,photo:t.value?t.value:null,role:(i=v.value)==null?void 0:i.id};await V.createUser(e),o.add({severity:"success",summary:"Success",detail:"Pengguna berhasil ditambahkan",life:3e3}),y(),f.push("/settings/users")}catch{o.add({severity:"error",summary:"Error",detail:"Gagal menambahkan pengguna",life:3e3})}};return(i,e)=>(C(),$(g,null,{default:B(()=>[s("div",P,[s("div",F,[s("div",G,[l(c,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),label:"Nama",placeholder:"Masukkan nama"},null,8,["modelValue"])]),s("div",O,[l(c,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),label:"Username",placeholder:"Masukkan username"},null,8,["modelValue"])]),s("div",j,[l(c,{"model-value":n.value,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a),label:"Email",placeholder:"Masukkan Email"},null,8,["model-value"])]),s("div",z,[l(w,{"model-value":m.value,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),label:"Password",placeholder:"Masukkan password"},null,8,["model-value"])]),s("div",A,[l(U,{"model-value":v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),label:"Role",options:_.value,onOpen:k},null,8,["model-value","options"]),l(x,{"model-value":t.value,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value=a),mandatory:!1,label:"Foto",onUpload:e[6]||(e[6]=a=>t.value=a)},null,8,["model-value"])])]),s("div",D,[l(p,{label:"Bersihkan",severity:"info",class:"text-xs",onClick:y}),l(p,{label:"Batal",severity:"secondary",class:"text-xs",onClick:h}),l(p,{label:"Submit",severity:"success",class:"text-xs",onClick:b})])])]),_:1}))}});export{ie as default};
