import{_ as T}from"./api.service-Dgs1boU1.js";import{_ as z}from"./FileUpload.vue_vue_type_script_setup_true_lang--lqHwBVE.js";import{_ as R}from"./Icon.vue_vue_type_script_setup_true_lang-MXjzyZbO.js";import{_ as E}from"./Image.vue_vue_type_script_setup_true_lang-BJRxWMRx.js";import{_ as A}from"./InputPassword.vue_vue_type_script_setup_true_lang-DvSZWWFt.js";import{_}from"./InputText.vue_vue_type_script_setup_true_lang-e6c03x4O.js";import{c as G}from"./auth.service-BxJEy6Ur.js";import{U as N}from"./user.service-o5zC87Vg.js";import{u as K,y as L,M as q,v as u,L as H,c as x,z as s,b as r,w as $,o as v,E as J,D as O,p as C,x as B,t as w,A as c,N as Q}from"./index-DOh3iN_U.js";import{s as W}from"./index-DpvwzWQu.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-LYmElTQ-.js";import"./index-__IG_7Gg.js";import"./index-4eifDWYF.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DO9keWeT.js";import"./index-BAxbCUjW.js";import"./index-_ukIlSQ8.js";import"./index-HQkD5G-S.js";const Y={class:"w-full bg-[#eeedf2] profile-view"},Z={class:"p-4"},ee={class:"flex flex-col gap-4"},se={class:"flex gap-14 w-full"},ae={class:"w-[30%]"},oe={class:"flex flex-col gap-2 w-full"},le={class:"flex flex-col gap-4 w-full space-y-2 py-8"},te={class:"flex flex-row gap-2 items-center"},re={class:"text-base"},ie={class:"flex flex-row gap-2 items-center"},ne={class:"text-base"},de={class:"flex flex-row gap-2 items-center"},ue={class:"text-base"},me={class:"flex flex-row gap-2 items-center"},ve={class:"text-base"},pe={key:0},ce={class:"flex flex-col gap-4 px-8"},fe={class:""},xe={class:""},be={class:""},_e={class:""},we={class:"flex justify-end gap-2 pt-8"},he=K({__name:"ProfileView",setup(ge){L(()=>{h()});const S=J(),b=q(),a=u(),i=u(),n=u(),d=u(),f=u(),m=u(),o=u(!1),F=()=>{o.value=!o.value},I=()=>{S.back()},j=()=>{i.value=void 0,n.value=void 0,d.value=void 0,f.value=void 0,m.value=void 0},h=async()=>{try{const l=sessionStorage.getItem("users");if(!l){console.error("User ID not found in session storage");return}const{data:e}=await N.getProfile(Number(l));a.value=e.data,i.value=a.value.name,n.value=a.value.username,d.value=a.value.email}catch(l){console.error("Error fetching profile:",l)}},D=async()=>{var l;try{if(!i.value&&!n.value&&!d.value){b.add({severity:"error",summary:"Error",detail:"Field Nama, Username, dan Email harus diisi",life:3e3});return}const e={name:i.value,username:n.value,email:d.value,password:f.value,photo:m.value?m.value:null};await N.updateProfile((l=a.value)==null?void 0:l.id,e),b.add({severity:"success",summary:"Sukses",detail:"Berhasil memperbarui profil",life:3e3}),o.value=!1,await h()}catch{b.add({severity:"error",summary:"Error",detail:"Gagal memperbarui profil",life:3e3})}};return H(()=>o.value,()=>{var l,e,p;o.value||(i.value=(l=a.value)==null?void 0:l.name,n.value=(e=a.value)==null?void 0:e.username,d.value=(p=a.value)==null?void 0:p.email)}),(l,e)=>(v(),x("div",Y,[s("div",Z,[r(T,{class:"p-4"},{default:$(()=>{var p,g,y,k,V,U,M,P;return[s("div",{class:O(`flex flex-col justify-between ${o.value?"":"h-[74vh]"}`)},[s("div",ee,[e[15]||(e[15]=s("h1",{class:"text-2xl font-bold mb-4"},"Profile",-1)),s("div",se,[s("div",ae,[(p=a.value)!=null&&p.photo?(v(),C(E,{key:0,src:(g=a.value)==null?void 0:g.photo,class:"object-cover overflow-hidden",type:"default",preview:!0},null,8,["src"])):(v(),C(E,{key:1,class:"object-cover overflow-hidden",src:`${B(G).initialImage}${(y=a.value)==null?void 0:y.username}`,type:"default",preview:!1},null,8,["src"]))]),s("div",oe,[s("div",le,[s("div",te,[e[6]||(e[6]=s("span",{class:"text-base font-medium w-[100px]"},"Nama",-1)),e[7]||(e[7]=s("span",{class:"text-base font-medium"},":",-1)),s("span",re,c((k=a.value)==null?void 0:k.name),1)]),s("div",ie,[e[8]||(e[8]=s("span",{class:"text-base font-medium w-[100px]"},"Username",-1)),e[9]||(e[9]=s("span",{class:"text-base font-medium"},":",-1)),s("span",ne,c((V=a.value)==null?void 0:V.username),1)]),s("div",de,[e[10]||(e[10]=s("span",{class:"text-base font-medium w-[100px]"},"Email",-1)),e[11]||(e[11]=s("span",{class:"text-base font-medium"},":",-1)),s("span",ue,c((U=a.value)==null?void 0:U.email),1)]),s("div",me,[e[12]||(e[12]=s("span",{class:"text-base font-medium w-[100px]"},"Posisi",-1)),e[13]||(e[13]=s("span",{class:"text-base font-medium"},":",-1)),s("span",ve,c((P=(M=a.value)==null?void 0:M.roles)==null?void 0:P.name),1)])]),o.value?(v(),x("div",pe,[r(B(W),{align:"center",type:"dotted"},{default:$(()=>e[14]||(e[14]=[s("b",null,"Ubah Profile",-1)])),_:1}),s("div",ce,[s("div",fe,[r(_,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),label:"Nama",placeholder:"Masukkan nama"},null,8,["modelValue"])]),s("div",xe,[r(_,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t),label:"Username",placeholder:"Masukkan username"},null,8,["modelValue"])]),s("div",be,[r(_,{"model-value":d.value,"onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t),label:"Email",placeholder:"Masukkan Email"},null,8,["model-value"])]),s("div",_e,[r(A,{"model-value":f.value,"onUpdate:modelValue":e[3]||(e[3]=t=>f.value=t),mandatory:!1,label:"Password Baru",placeholder:"Masukkan password"},null,8,["model-value"])]),s("div",null,[r(z,{"model-value":m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),mandatory:!1,label:"Foto",onUpload:e[5]||(e[5]=t=>m.value=t)},null,8,["model-value"])])])])):w("",!0)])])]),s("div",we,[s("button",{onClick:I,class:"text-xs rounded-sm !px-2 !py-1 bg-black text-white hover:bg-black/60 hover:cursor-pointer shadow-md border-1 border-gray-600"}," Kembali "),s("button",{onClick:F,class:"text-xs rounded-sm !px-2 !py-1 bg-blue-400 text-white hover:bg-blue-500/60 hover:cursor-pointer shadow-md border-1 border-blue-600"},[Q(c(o.value?"Tutup":"Ubah Profile")+" ",1),r(R,{icon:o.value?"close":"edit-2",type:"line"},null,8,["icon"])]),o.value?(v(),x("button",{key:0,onClick:j,class:"text-xs rounded-sm !px-2 !py-1 bg-transparent text-red-500 hover:bg-red-500/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-red-500"}," Bersihkan Field ")):w("",!0),o.value?(v(),x("button",{key:1,onClick:D,class:"text-xs rounded-sm !px-2 !py-1 bg-green-400 text-white hover:bg-green-400/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-green-500"}," Submit ")):w("",!0)])],2)]}),_:1})])]))}}),Re=X(he,[["__scopeId","data-v-1acd8d72"]]);export{Re as default};
