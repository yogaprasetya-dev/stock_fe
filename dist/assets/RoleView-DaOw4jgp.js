import{_ as E}from"./DataTable.vue_vue_type_script_setup_true_lang-DU7Bh_T0.js";import{R as B}from"./role.service-Cps6zKxP.js";import{f as C}from"./data.utils-Cp1LBIu0.js";import{_ as M}from"./DialogConfirm.vue_vue_type_script_setup_true_lang-BHok5e_l.js";import{e as b}from"./index-CFjhT2rJ.js";import{_ as S}from"./Button.vue_vue_type_script_setup_true_lang-C1Ovgw-s.js";import{_ as U}from"./ButtonMultiAction.vue_vue_type_script_setup_true_lang-Cvyx0ufE.js";import{_ as V}from"./api.service-Dgs1boU1.js";import{_ as I,a as O}from"./ButtonSearch.vue_vue_type_script_setup_true_lang-D-p7qWfa.js";import{u as T,v as d,a5 as H,y as J,K as L,q as j,a6 as z,o as w,c as P,a7 as G,z as m,b as u,M as q,I as _,J as K,a4 as k,E as Q,p as D,w as W,F as X,r as Y,D as Z,t as ee,x as te}from"./index-DOh3iN_U.js";import{_ as F}from"./DatePicker.vue_vue_type_script_setup_true_lang-DWsIWa76.js";import"./Icon.vue_vue_type_script_setup_true_lang-MXjzyZbO.js";import"./Animation-Bi2SbY78.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BE2iSHdx.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DO9keWeT.js";import"./index-HQkD5G-S.js";import"./index-CC8nIHWH.js";import"./index-__IG_7Gg.js";import"./auth.service-BxJEy6Ur.js";import"./index-LYmElTQ-.js";import"./index-4eifDWYF.js";import"./index-_ukIlSQ8.js";import"./InputText.vue_vue_type_script_setup_true_lang-e6c03x4O.js";const ae={class:"flex items-end justify-end gap-2","data-wv-section":"filteractionbuttons",style:{"grid-area":"2/4"}},le=T({inheritAttrs:!1,__name:"RoleFilterFields",props:{tableName:{default:"product-table"}},emits:["apply"],setup($,{emit:y}){const v=d(4),o=d([]),l=d([]),p=H(!1),a=d(null),i=$,f=y;J(()=>{R(),b.on("show-filter",g)}),L(()=>{b.off("show-filter",g)});const x=()=>{const r={};if(b.emit("multi-select:hide-overlay"),o.value&&o.value.length>0){const s=o.value[0]?new Date(o.value[0]):null,n=o.value[1]?new Date(o.value[1]):new Date(o.value[0]),c=[s];n&&c.push(n),r.updatedAt=JSON.stringify(c)}if(l.value&&l.value.length>0){const s=l.value[0]?new Date(l.value[0]):null,n=l.value[1]?new Date(l.value[1]):new Date(l.value[0]),c=[s];n&&c.push(n),r.createdAt=JSON.stringify(c)}b.emit("data-table:apply-filter",{tableName:i==null?void 0:i.tableName,filter:r}),b.emit("data-table:clear-selected-data",{tableName:i==null?void 0:i.tableName}),f==null||f("apply",r)},A=()=>{o.value=[],l.value=[]},g=r=>{r.tableName===i.tableName&&(p.value=r.show)},R=()=>{if(a.value){const{children:r}=a.value,s=a.value.childElementCount,n=s%v.value;let[c,e]=[1,1];for(const t in Array.from({length:s})){const N=Number(t)===s-1;r[t].setAttribute("style",`grid-area: ${c}/${N&&n?v.value:e}`),++e>v.value&&(e=1,c++)}}};return(r,s)=>j((w(),P("div",{ref_key:"container",ref:a,class:"grid gap-4 py-2 bg-[#5080e1]/10 rounded-md px-3",style:G(`grid-template-columns: repeat(${v.value}, 1fr)`)},[m("div",null,[u(F,{"model-value":o.value,"onUpdate:modelValue":s[0]||(s[0]=n=>o.value=n),label:"Terakhir Diubah",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),m("div",null,[u(F,{"model-value":l.value,"onUpdate:modelValue":s[1]||(s[1]=n=>l.value=n),label:"Dibuat Pada",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),m("div",ae,[u(S,{onClick:A,label:"Bersihkan Fields","data-wv-section":"clearbutton",severity:"secondary",class:"text-xs"}),u(S,{onClick:x,label:"Terapkan Filter","data-wv-section":"applybutton",severity:"success",class:"text-xs"})])],4)),[[z,p.value]])}}),se={class:"flex flex-col gap-2 text-black"},oe={class:"flex flex-col gap-2"},ie={class:"flex flex-row justify-start gap-2"},ne={class:"w-full flex justify-end gap-2"},Fe=T({__name:"RoleView",setup($){const y=Q(),v=K(),o=q(),l=d(),p=d([]),a=d({visible:!1,header:"",severity:"success",confirmButtonSeverity:"success"}),i=d([]),f=_(()=>v.path.split("/").pop()),x=_(()=>[{label:"Edit",icon:"edit",visible:k("setting_role").update,command:()=>{var e;sessionStorage.setItem("role",JSON.stringify((e=l.value)==null?void 0:e.id)),y.push("/settings/role/edit")}},{label:"Hapus",icon:"delete-bin",danger:!0,visible:k("setting_role").delete,command:()=>{i.value=[l.value],a.value={visible:!0,header:"Hapus Role",severity:"success",confirmButtonSeverity:"success",message:"Apakah kamu yakin ingin menghapus role ini?",list:i.value.map(e=>e.name),confirmLabel:"Hapus",actionable:!0}}}]),A=_(()=>[{label:"Hapus",icon:"delete-bin",danger:!0,visible:k("setting_role").delete,command:()=>{i.value=p.value,a.value={visible:!0,header:"Edit Role",severity:"success",confirmButtonSeverity:"success",message:"Apakah kamu yakin ingin mengubah role ini?",list:i.value.map(e=>e.name),confirmLabel:"Ubah",actionable:!0}}}]),g=[{header:"Nama Role",field:"name",sortable:!0},{header:"Terakhir Diubah",field:"updatedAt",sortable:!0,bodyTemplate:e=>e.updatedAt?C(new Date(e==null?void 0:e.updatedAt)):"-"},{header:"Dibuat Pada",field:"createdAt",sortable:!0,bodyTemplate:e=>e.createdAt?C(new Date(e==null?void 0:e.createdAt)):"-"}],R=_(()=>p.value.length>0),r=()=>{y.push("/settings/role/add")},s=async()=>{await c(i.value.map(e=>e.id))},n=async e=>{try{const{data:t}=await B.getRole(e);return t}catch(t){console.error("Error fetching data:",t)}},c=async e=>{try{const t={id:e};await B.deleteRole(t),a.value.visible=!1,o.add({severity:"success",summary:"Sukses",detail:"Berhasil menghapus role",life:3e3}),b.emit("data-table:update",{tableName:"table-role"})}catch(t){console.error("Error deleting role:",t),o.add({severity:"error",summary:"Gagal",detail:"Gagal menghapus role",life:3e3})}};return(e,t)=>{const N=Y("router-view");return f.value==="add"||f.value==="edit"?(w(),D(N,{key:0})):(w(),P(X,{key:1},[u(V,null,{default:W(()=>[m("div",se,[m("div",oe,[m("div",ie,[u(U,{options:A.value,class:Z(`${R.value?"flex":"!hidden"} h-[21px] w-[120px]`)},null,8,["options","class"]),m("div",ne,[u(I,{"table-name":"table-role"}),u(O,{"table-name":"table-role"}),te(k)("setting_role").create?(w(),D(S,{key:0,onClick:r,label:"Tambah Role",severity:"primary",class:"text-xs"})):ee("",!0)])]),u(le,{"table-name":"table-role"}),u(E,{"data-key":"id","fetch-function":n,columns:g,options:x.value,onToggleOption:t[0]||(t[0]=h=>l.value=h),"onUpdate:selectedData":t[1]||(t[1]=h=>p.value=h),"table-name":"table-role","selection-type":"checkbox","use-paginator":""},null,8,["options"])])])]),_:1}),u(M,{visible:a.value.visible,"onUpdate:visible":t[2]||(t[2]=h=>a.value.visible=h),onConfirm:s,header:a.value.header,"header-icon":"check",list:a.value.list,message:a.value.message,severity:a.value.severity,"confirm-button-severity":a.value.confirmButtonSeverity},null,8,["visible","header","list","message","severity","confirm-button-severity"])],64))}}});export{Fe as default};
