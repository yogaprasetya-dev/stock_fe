import{_ as P}from"./DataTable.vue_vue_type_script_setup_true_lang-DAncOhuW.js";import{R as D}from"./role.service-CRmNqG-L.js";import{f as $}from"./data.utils-eGwCzW_2.js";import{_ as E}from"./DialogConfirm.vue_vue_type_style_index_0_lang-BfVbRh0m.js";import{e as g}from"./index-CFjhT2rJ.js";import{_ as N}from"./Button.vue_vue_type_script_setup_true_lang-5po7rupL.js";import{_ as H}from"./ButtonMultiAction.vue_vue_type_script_setup_true_lang-ORzOvzNi.js";import{_ as U}from"./Card.vue_vue_type_script_setup_true_lang-iQB6KAHY.js";import{_ as V,a as I}from"./ButtonSearch.vue_vue_type_script_setup_true_lang-B6ppOiw4.js";import{u as F,v as m,a6 as L,E as O,L as J,q as M,a7 as j,o as k,c as T,a8 as G,y as p,b as d,N as q,I as R,J as z,K as _,D as K,p as B,w as Q,F as W,r as X,t as Y,x as Z}from"./index-ByRapvwn.js";import{_ as C}from"./DatePicker.vue_vue_type_script_setup_true_lang-BYvHNTlr.js";import"./Icon.vue_vue_type_script_setup_true_lang-BtY0uICK.js";import"./Animation-MaevpNnV.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-Cz2pOrzl.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-sMNZlSVs.js";import"./index-DAZuYeh0.js";import"./index-DiNm_OHx.js";import"./index-CfL5tkfP.js";import"./api.service-BGMa1GQA.js";import"./index-D3QVXGA5.js";import"./index-DMDG_i5n.js";import"./index-B-v-Ke4w.js";import"./index-DyZzSw_I.js";import"./InputText.vue_vue_type_script_setup_true_lang-DpdOSYTX.js";const ee={class:"flex items-end justify-end gap-2","data-wv-section":"filteractionbuttons",style:{"grid-area":"2/4"}},te=F({inheritAttrs:!1,__name:"RoleFilterFields",props:{tableName:{default:"product-table"}},emits:["apply"],setup(S,{emit:y}){const f=m(4),i=m([]),a=m([]),c=L(!1),l=m(null),n=S,b=y;O(()=>{A(),g.on("show-filter",h)}),J(()=>{g.off("show-filter",h)});const w=()=>{const u={};if(g.emit("multi-select:hide-overlay"),i.value&&i.value.length>0){const o=i.value[0]?new Date(i.value[0]):null,r=i.value[1]?new Date(i.value[1]):new Date(i.value[0]),e=[o];r&&e.push(r),u.updatedAt=JSON.stringify(e)}if(a.value&&a.value.length>0){const o=a.value[0]?new Date(a.value[0]):null,r=a.value[1]?new Date(a.value[1]):new Date(a.value[0]),e=[o];r&&e.push(r),u.createdAt=JSON.stringify(e)}g.emit("data-table:apply-filter",{tableName:n==null?void 0:n.tableName,filter:u}),g.emit("data-table:clear-selected-data",{tableName:n==null?void 0:n.tableName}),b==null||b("apply",u)},x=()=>{i.value=[],a.value=[]},h=u=>{u.tableName===n.tableName&&(c.value=u.show)},A=()=>{if(l.value){const{children:u}=l.value,o=l.value.childElementCount,r=o%f.value;let[e,t]=[1,1];for(const v in Array.from({length:o})){const s=Number(v)===o-1;u[v].setAttribute("style",`grid-area: ${e}/${s&&r?f.value:t}`),++t>f.value&&(t=1,e++)}}};return(u,o)=>M((k(),T("div",{ref_key:"container",ref:l,class:"grid gap-4 py-2 bg-[#5080e1]/10 rounded-md px-3",style:G(`grid-template-columns: repeat(${f.value}, 1fr)`)},[p("div",null,[d(C,{"model-value":i.value,"onUpdate:modelValue":o[0]||(o[0]=r=>i.value=r),label:"Terakhir Diubah",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),p("div",null,[d(C,{"model-value":a.value,"onUpdate:modelValue":o[1]||(o[1]=r=>a.value=r),label:"Dibuat Pada",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),p("div",ee,[d(N,{onClick:x,label:"Bersihkan Fields","data-wv-section":"clearbutton",severity:"secondary",class:"text-xs"}),d(N,{onClick:w,label:"Terapkan Filter","data-wv-section":"applybutton",severity:"success",class:"text-xs"})])],4)),[[j,c.value]])}}),ae={class:"flex flex-col gap-2 text-black"},le={class:"flex flex-col gap-2"},se={class:"flex flex-row justify-start gap-2"},oe={class:"w-full flex justify-end gap-2"},Ce=F({__name:"RoleView",setup(S){const y=K(),f=z(),i=q(),a=m(),c=m([]),l=m({visible:!1,header:"",severity:"success",confirmButtonSeverity:"success"}),n=m([]),b=R(()=>f.path.split("/").pop()),w=R(()=>[{label:"Edit",icon:"edit",visible:_("setting_role").update,command:()=>{var e;sessionStorage.setItem("role",JSON.stringify((e=a.value)==null?void 0:e.id)),y.push("/settings/role/edit")}},{label:"Hapus",icon:"delete-bin",danger:!0,visible:_("setting_role").delete,command:()=>{n.value=[a.value],l.value={visible:!0,header:"Hapus Role",severity:"error",confirmButtonSeverity:"danger",message:"Apakah kamu yakin ingin menghapus role ini?",list:n.value.map(e=>e.name),confirmLabel:"Hapus",actionable:!0}}}]),x=R(()=>[{label:"Hapus",icon:"delete-bin",danger:!0,visible:_("setting_role").delete,command:()=>{n.value=c.value,l.value={visible:!0,header:"Hapus Role",severity:"error",confirmButtonSeverity:"danger",message:"Apakah kamu yakin ingin menghapus role ini?",list:n.value.map(e=>e.name),confirmLabel:"Hapus",actionable:!0}}}]),h=[{header:"Nama Role",field:"name",sortable:!0},{header:"Terakhir Diubah",field:"updatedAt",sortable:!0,bodyTemplate:e=>e.updatedAt?$(new Date(e==null?void 0:e.updatedAt)):"-"},{header:"Dibuat Pada",field:"createdAt",sortable:!0,bodyTemplate:e=>e.createdAt?$(new Date(e==null?void 0:e.createdAt)):"-"}],A=()=>{y.push("/settings/role/add")},u=async()=>{await r(n.value.map(e=>e.id))},o=async e=>{try{const{data:t}=await D.getRole(e);return t}catch(t){console.error("Error fetching data:",t)}},r=async e=>{var t,v;try{const s={id:e};await D.deleteRole(s),l.value.visible=!1,i.add({severity:"success",summary:"Sukses",detail:"Berhasil menghapus role",life:3e3}),c.value=[],a.value=void 0,g.emit("data-table:update",{tableName:"table-role"})}catch(s){console.error("Error deleting role:",s),i.add({severity:"error",summary:"Gagal",detail:s?(v=(t=s.response)==null?void 0:t.data)==null?void 0:v.message:"Gagal menghapus role",life:3e3})}};return(e,t)=>{const v=X("router-view");return b.value==="add"||b.value==="edit"?(k(),B(v,{key:0})):(k(),T(W,{key:1},[d(U,null,{default:Q(()=>[p("div",ae,[p("div",le,[p("div",se,[d(H,{"selected-data":c.value,"onUpdate:selectedData":t[0]||(t[0]=s=>c.value=s),options:x.value,"table-name":"table-role"},null,8,["selected-data","options"]),p("div",oe,[d(V,{"table-name":"table-role"}),d(I,{"table-name":"table-role"}),Z(_)("setting_role").create?(k(),B(N,{key:0,onClick:A,label:"Tambah Role",severity:"primary",class:"text-xs"})):Y("",!0)])]),d(te,{"table-name":"table-role"}),d(P,{"data-key":"id","fetch-function":o,columns:h,options:w.value,onToggleOption:t[1]||(t[1]=s=>a.value=s),"onUpdate:selectedData":t[2]||(t[2]=s=>c.value=s),"table-name":"table-role","selection-type":"checkbox","use-paginator":""},null,8,["options"])])])]),_:1}),d(E,{visible:l.value.visible,"onUpdate:visible":t[3]||(t[3]=s=>l.value.visible=s),onConfirm:u,header:l.value.header,"header-icon":"check",list:l.value.list,message:l.value.message,severity:l.value.severity,"confirm-button-severity":l.value.confirmButtonSeverity},null,8,["visible","header","list","message","severity","confirm-button-severity"])],64))}}});export{Ce as default};
