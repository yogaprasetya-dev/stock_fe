import{u as g,M as f,v as c,c as v,z as o,b as n,O as x,P as h,E as b,o as _}from"./index-DOh3iN_U.js";import{A as w}from"./Animation-Bi2SbY78.js";import{_ as y}from"./InputPassword.vue_vue_type_script_setup_true_lang-DvSZWWFt.js";import{_ as k}from"./InputText.vue_vue_type_script_setup_true_lang-e6c03x4O.js";import{A as S}from"./auth.service-BxJEy6Ur.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DO9keWeT.js";import"./index-HQkD5G-S.js";import"./index-BAxbCUjW.js";const V={class:"bg-login h-screen w-full bg-cover bg-center text-black"},E={class:"flex items-center justify-center h-screen"},L={class:"w-[300px] h-[350px] lg:w-[800px] lg:h-[400px] bg-white rounded-[20px]"},A={class:"grid grid-cols-1 lg:grid-cols-2 h-full"},M={class:"w-full h-full flex flex-col gap-4 py-5 px-4 lg:px-8"},B={class:"flex flex-col gap-6 p-3"},$=g({__name:"LoginView",setup(N){const u=b(),i=f(),t=c(),l=c(),m=async()=>{var r,a,s,d;try{if(!t.value){alert("Please enter your email or username");return}if(!l.value){alert("Please enter your password");return}const e=await S.login({identifier:t.value,password:l.value}),p={id:e.data.data.id,name:e.data.data.name,email:e.data.data.email,username:e.data.data.username,role:e.data.data.role,permissions:e.data.data.permissions,photo:e.data.data.photo};localStorage.setItem("data",JSON.stringify(e)),h(e.data.data.accessToken),localStorage.setItem("user",JSON.stringify(p)),i.add({severity:"success",summary:"Login Successful",detail:"Redirecting to dashboard...",life:2e3}),u.push("/dashboard").then(()=>{window.location.reload()})}catch(e){console.error("Error during login:",e),console.log("Login error:",e),console.log("Message:",(a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message),i.add({severity:"error",summary:"Login Failed",detail:e?(d=(s=e.response)==null?void 0:s.data)==null?void 0:d.message:"Gagal login, silakan coba lagi",life:3e3})}};return(r,a)=>(_(),v("div",V,[o("div",E,[o("div",L,[o("div",A,[n(w,{animation:"login",class:"lg:w-[400px] w-[100px] lg:block hidden",onContextmenu:a[0]||(a[0]=x(()=>{},["prevent"]))}),o("div",M,[a[3]||(a[3]=o("div",{class:"flex flex-col items-center justify-center gap-4"},[o("span",{class:"text-2xl font-bold"},"Endang Stock"),o("span",{class:"text-xl font-semibold"},"Login")],-1)),o("div",B,[o("div",null,[n(k,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=s=>t.value=s),label:"Email or Username",placeholder:"Enter your email or username"},null,8,["modelValue"])]),o("div",null,[n(y,{"model-value":l.value,"onUpdate:modelValue":a[2]||(a[2]=s=>l.value=s)},null,8,["model-value"])]),o("button",{onClick:m,class:"bg-black text-white text-sm rounded-md font-semibold p-2 w-full mt-4 hover:bg-gray-800 hover:cursor-pointer transition duration-200"}," Login ")])])])])])]))}});export{$ as default};
