import{u as R,O as E,G as P,v as n,p as $,w as N,o as S,y as l,b as d,P as B,E as C}from"./index-BGhEJGBM.js";import{_ as F}from"./Card.vue_vue_type_script_setup_true_lang-BOCibx2r.js";import{_ as G}from"./Dropdown.vue_vue_type_script_setup_true_lang-BxnTRKkE.js";import{_ as M}from"./FileUpload.vue_vue_type_style_index_0_lang-D_GUCn1F.js";import{_ as O}from"./InputPassword.vue_vue_type_script_setup_true_lang-DeXo7Iff.js";import{_ as c}from"./InputText.vue_vue_type_script_setup_true_lang-OxSdNUG8.js";import{U as T}from"./user.service-CBwWKza1.js";import{R as j}from"./role.service-BV1IDYLV.js";import{_ as A}from"./Checkbox.vue_vue_type_script_setup_true_lang-BJx-ahA-.js";import"./index-BweVj9b9.js";import"./index-BeR49MAt.js";import"./index-WWgKsfq7.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DYbcOFbB.js";import"./index-vx55ZWHK.js";import"./index-C6Gu924b.js";import"./index-C0mE0xBy.js";import"./index-MGwmnnen.js";import"./Icon.vue_vue_type_script_setup_true_lang-CaTtpYxS.js";import"./Image.vue_vue_type_script_setup_true_lang-VPCFql0C.js";import"./index-CsCeGQRa.js";import"./index-B3Anr8dw.js";import"./api.service-Cu4WKU11.js";const D={class:"grid grid-cols-2 gap-2"},K={class:"pr-4"},q={class:""},z={class:"pr-4"},H={class:""},I={class:"flex flex-col gap-2 pr-4"},J={class:"flex justify-end pt-8"},L={class:"flex flex-col gap-4 items-end"},he=R({__name:"AddUserView",setup(Q){const r=E(),V=C();P(()=>{h()});const o=n(),s=n(),i=n(),t=n(),u=n(),v=n(),f=n(!1),b=n(),y=()=>{V.push("/settings/users")},g=()=>{o.value=void 0,s.value=void 0,i.value=void 0,t.value=void 0,u.value=void 0,v.value=void 0},h=async()=>{try{const{data:m}=await j.getRoleDropdown();b.value=m.data}catch{r.add({severity:"error",summary:"Error",detail:"Gagal memuat data role",life:3e3})}},W=async()=>{var m,e,a,k,w,x,_,U;try{if(!o.value){r.add({severity:"warn",summary:"Warning",detail:"Nama harus diisi",life:3e3});return}if(!s.value){r.add({severity:"warn",summary:"Warning",detail:"Username harus diisi",life:3e3});return}if(!i.value){r.add({severity:"warn",summary:"Warning",detail:"Email harus diisi",life:3e3});return}if(!t.value){r.add({severity:"warn",summary:"Warning",detail:"Password harus diisi",life:3e3});return}if(!v.value){r.add({severity:"warn",summary:"Warning",detail:"Role harus dipilih",life:3e3});return}if(((m=o==null?void 0:o.value)==null?void 0:m.length)>50){r.add({severity:"warn",summary:"Warning",detail:"Nama tidak boleh lebih dari 50 karakter",life:3e3});return}if(((e=s==null?void 0:s.value)==null?void 0:e.length)>15){r.add({severity:"warn",summary:"Warning",detail:"Username tidak boleh lebih dari 15 karakter",life:3e3});return}if(((a=i==null?void 0:i.value)==null?void 0:a.length)>50){r.add({severity:"warn",summary:"Warning",detail:"Email tidak boleh lebih dari 50 karakter",life:3e3});return}if(((k=t==null?void 0:t.value)==null?void 0:k.length)<6){r.add({severity:"warn",summary:"Warning",detail:"Password harus minimal 6 karakter",life:3e3});return}if(((w=t==null?void 0:t.value)==null?void 0:w.length)>100){r.add({severity:"warn",summary:"Warning",detail:"Password tidak boleh lebih dari 100 karakter",life:3e3});return}const p={name:o.value,username:s.value,email:i.value,password:t.value,photo:u.value?u.value:null,role:(x=v.value)==null?void 0:x.id};if(await T.createUser(p),r.add({severity:"success",summary:"Success",detail:"Pengguna berhasil ditambahkan",life:3e3}),g(),f.value)return;y()}catch(p){r.add({severity:"error",summary:"Error",detail:p?(U=(_=p.response)==null?void 0:_.data)==null?void 0:U.message:"Gagal menambahkan pengguna",life:3e3})}};return(m,e)=>(S(),$(F,null,{default:N(()=>[l("form",{class:"flex flex-col",onSubmit:B(W,["prevent"])},[l("div",D,[l("div",K,[d(c,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),label:"Nama",placeholder:"Masukkan nama"},null,8,["modelValue"])]),l("div",q,[d(c,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a),label:"Username",placeholder:"Masukkan username"},null,8,["modelValue"])]),l("div",z,[d(c,{"model-value":i.value,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value=a),label:"Email",placeholder:"Masukkan Email",type:"email"},null,8,["model-value"])]),l("div",H,[d(O,{"model-value":t.value,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value=a),label:"Password",placeholder:"Masukkan password"},null,8,["model-value"])]),l("div",I,[d(G,{"model-value":v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),label:"Role",options:b.value,onOpen:h},null,8,["model-value","options"]),d(M,{"model-value":u.value,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value=a),mandatory:!1,label:"Foto",onUpload:e[6]||(e[6]=a=>u.value=a)},null,8,["model-value"])])]),l("div",J,[l("div",L,[d(A,{"model-value":f.value,"onUpdate:modelValue":e[7]||(e[7]=a=>f.value=a),label:"Tetap di sini?"},null,8,["model-value"]),l("div",{class:"flex gap-2"},[l("button",{type:"button",onClick:y,class:"text-xs rounded-sm !px-2 !py-1 bg-black text-white hover:bg-black/60 hover:cursor-pointer shadow-md border-1 border-gray-600"}," Kembali "),l("button",{type:"button",onClick:g,class:"text-xs rounded-sm !px-2 !py-1 bg-transparent text-red-500 hover:bg-red-500/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-red-500"}," Bersihkan Field "),e[8]||(e[8]=l("button",{type:"submit",class:"text-xs rounded-sm !px-2 !py-1 bg-green-400 text-white hover:bg-green-400/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-green-500"}," Submit ",-1))])])])],32)]),_:1}))}});export{he as default};
