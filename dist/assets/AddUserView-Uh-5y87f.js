import{u as R,N as E,E as N,v as n,p as $,w as P,o as S,y as l,b as d,O as B,D as C}from"./index-DluXfAYq.js";import{_ as F}from"./Card.vue_vue_type_script_setup_true_lang-C017E02U.js";import{_ as M}from"./Dropdown.vue_vue_type_script_setup_true_lang-C3RR0OM6.js";import{_ as O}from"./FileUpload.vue_vue_type_style_index_0_lang-CRG_02mR.js";import{_ as D}from"./InputPassword.vue_vue_type_script_setup_true_lang-BFGKk2il.js";import{_ as c}from"./InputText.vue_vue_type_script_setup_true_lang-B3fqkayH.js";import{U as G}from"./user.service-DE3vZPl5.js";import{R as T}from"./role.service-D_dUEK8k.js";import{_ as j}from"./Checkbox.vue_vue_type_script_setup_true_lang-BinBIZd9.js";import"./index-BMVdyEhO.js";import"./index-C1wKYxS8.js";import"./index-CEFGEvqD.js";import"./index-Ce4jSpJo.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-C2fF7I71.js";import"./index-DpjZpPgD.js";import"./index-_vBxaGo6.js";import"./auth.service-Bnvyf6nu.js";import"./Icon.vue_vue_type_script_setup_true_lang-ClDVuEcm.js";import"./Image.vue_vue_type_script_setup_true_lang-BLb6KO0h.js";import"./index-BjD8AHIN.js";import"./index-BSV5yMhm.js";import"./api.service-O4n3iPO9.js";const A={class:"grid grid-cols-2 gap-2"},K={class:"pr-4"},q={class:""},z={class:"pr-4"},H={class:""},I={class:"flex flex-col gap-2 pr-4"},J={class:"flex justify-end pt-8"},L={class:"flex flex-col gap-4 items-end"},ye=R({__name:"AddUserView",setup(Q){const r=E(),V=C();N(()=>{y()});const o=n(),s=n(),i=n(),t=n(),u=n(),f=n(!1),v=n(),b=n(),g=()=>{V.push("/settings/users")},h=()=>{o.value=void 0,s.value=void 0,i.value=void 0,t.value=void 0,u.value=void 0,v.value=void 0},y=async()=>{try{const{data:m}=await T.getRoleDropdown();b.value=m.data}catch{r.add({severity:"error",summary:"Error",detail:"Gagal memuat data role",life:3e3})}},W=async()=>{var m,e,a,k,w,x,_,U;try{if(!o.value){r.add({severity:"warn",summary:"Warning",detail:"Nama harus diisi",life:3e3});return}if(!s.value){r.add({severity:"warn",summary:"Warning",detail:"Username harus diisi",life:3e3});return}if(!i.value){r.add({severity:"warn",summary:"Warning",detail:"Email harus diisi",life:3e3});return}if(!t.value){r.add({severity:"warn",summary:"Warning",detail:"Password harus diisi",life:3e3});return}if(!v.value){r.add({severity:"warn",summary:"Warning",detail:"Role harus dipilih",life:3e3});return}if(((m=o==null?void 0:o.value)==null?void 0:m.length)>50){r.add({severity:"warn",summary:"Warning",detail:"Nama tidak boleh lebih dari 50 karakter",life:3e3});return}if(((e=s==null?void 0:s.value)==null?void 0:e.length)>15){r.add({severity:"warn",summary:"Warning",detail:"Username tidak boleh lebih dari 15 karakter",life:3e3});return}if(((a=i==null?void 0:i.value)==null?void 0:a.length)>50){r.add({severity:"warn",summary:"Warning",detail:"Email tidak boleh lebih dari 50 karakter",life:3e3});return}if(((k=t==null?void 0:t.value)==null?void 0:k.length)<6){r.add({severity:"warn",summary:"Warning",detail:"Password harus minimal 6 karakter",life:3e3});return}if(((w=t==null?void 0:t.value)==null?void 0:w.length)>100){r.add({severity:"warn",summary:"Warning",detail:"Password tidak boleh lebih dari 100 karakter",life:3e3});return}const p={name:o.value,username:s.value,email:i.value,password:t.value,photo:u.value?u.value:null,role:(x=v.value)==null?void 0:x.id};if(await G.createUser(p),r.add({severity:"success",summary:"Success",detail:"Pengguna berhasil ditambahkan",life:3e3}),h(),f.value)return;g()}catch(p){r.add({severity:"error",summary:"Error",detail:p?(U=(_=p.response)==null?void 0:_.data)==null?void 0:U.message:"Gagal menambahkan pengguna",life:3e3})}};return(m,e)=>(S(),$(F,null,{default:P(()=>[l("form",{class:"flex flex-col",onSubmit:B(W,["prevent"])},[l("div",A,[l("div",K,[d(c,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),label:"Nama",placeholder:"Masukkan nama"},null,8,["modelValue"])]),l("div",q,[d(c,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value=a),label:"Username",placeholder:"Masukkan username"},null,8,["modelValue"])]),l("div",z,[d(c,{"model-value":i.value,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value=a),label:"Email",placeholder:"Masukkan Email"},null,8,["model-value"])]),l("div",H,[d(D,{"model-value":t.value,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value=a),label:"Password",placeholder:"Masukkan password"},null,8,["model-value"])]),l("div",I,[d(M,{"model-value":v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),label:"Role",options:b.value,onOpen:y},null,8,["model-value","options"]),d(O,{"model-value":u.value,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value=a),mandatory:!1,label:"Foto",onUpload:e[6]||(e[6]=a=>u.value=a)},null,8,["model-value"])])]),l("div",J,[l("div",L,[d(j,{"model-value":f.value,"onUpdate:modelValue":e[7]||(e[7]=a=>f.value=a),label:"Tetap di sini?"},null,8,["model-value"]),l("div",{class:"flex gap-2"},[l("button",{type:"button",onClick:g,class:"text-xs rounded-sm !px-2 !py-1 bg-black text-white hover:bg-black/60 hover:cursor-pointer shadow-md border-1 border-gray-600"}," Kembali "),l("button",{type:"button",onClick:h,class:"text-xs rounded-sm !px-2 !py-1 bg-transparent text-red-500 hover:bg-red-500/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-red-500"}," Bersihkan Field "),e[8]||(e[8]=l("button",{type:"submit",class:"text-xs rounded-sm !px-2 !py-1 bg-green-400 text-white hover:bg-green-400/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-green-500"}," Submit ",-1))])])])],32)]),_:1}))}});export{ye as default};
