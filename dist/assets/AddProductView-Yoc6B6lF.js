import{u as I,E as N,N as $,v as l,p as K,w as T,o as j,y as r,b as s,O as E,D as W}from"./index-DuqMkg4i.js";import{_ as G}from"./Card.vue_vue_type_script_setup_true_lang-B8PURPzj.js";import{_ as g}from"./Dropdown.vue_vue_type_script_setup_true_lang-B7n7CyQj.js";import{_ as y}from"./InputText.vue_vue_type_script_setup_true_lang-3JzyQCM6.js";import{P as C}from"./product.service-DaIBt7sm.js";import{B as H}from"./brand.service-CSakAhjw.js";import{C as F}from"./category.service-Bl3jbfOa.js";import{U as R}from"./unit.service-BUe2dbSw.js";import{g as A}from"./data.utils-eGwCzW_2.js";import{_ as q}from"./Checkbox.vue_vue_type_script_setup_true_lang-BzWzbJP8.js";import"./index-DSPpt8Dk.js";import"./index-CxOcdtD_.js";import"./index-BuCuFxRa.js";import"./index-DwN_o03U.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-BKnS3hZE.js";import"./api.service-C54YsUjA.js";import"./index-D3QVXGA5.js";const z={class:"flex items-center gap-10"},J={class:"w-full"},L={class:"w-full"},Q={class:"flex items-center gap-10"},X={class:"w-full"},Y={class:"w-full"},Z={class:"flex items-center gap-10"},ee={class:"w-full"},ae={class:"w-full"},te={class:"flex justify-end pt-8"},re={class:"flex flex-col gap-4 items-end"},xe=I({__name:"AddProductView",setup(oe){N(()=>{P(),M()});const O=W(),o=$(),h=l(0),m=l(),d=l(),c=l(),i=l(),n=l(),u=l(),f=l(!1),b=l(),k=l(),w=l(),x=t=>{t==null||t.preventDefault(),O.push("/product/data")},p=()=>{var t,e,a;m.value=A(h.value,(t=i.value)==null?void 0:t.id,(e=n.value)==null?void 0:e.id,(a=u.value)==null?void 0:a.id)},_=()=>{d.value=void 0,i.value=void 0,c.value=void 0,n.value=void 0,u.value=void 0,p()},P=async()=>{var t,e;try{const{data:a}=await C.getProductIndex();h.value=a.data.nextIndex,p()}catch(a){o.add({severity:"error",summary:"Error",detail:`Gagal memuat indeks produk: ${((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},S=async()=>{var t,e;try{const{data:a}=await H.getBrandDropdown();b.value=a.data}catch(a){o.add({severity:"error",summary:"Error",detail:`Gagal memuat data merek: ${((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},V=async()=>{var t,e;try{const{data:a}=await F.getCategoryDropdown();k.value=a.data}catch(a){o.add({severity:"error",summary:"Error",detail:`Gagal memuat data kategori: ${((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},M=async()=>{var t,e;try{const{data:a}=await R.getUnitDropdown();w.value=a.data}catch(a){o.add({severity:"error",summary:"Error",detail:`Gagal memuat data satuan: ${((e=(t=a.response)==null?void 0:t.data)==null?void 0:e.message)||"Terjadi kesalahan"}`,life:3e3})}},D=async()=>{var t,e,a,U,B;try{if(!d.value){o.add({severity:"warn",summary:"Warning",detail:"Nama produk harus diisi",life:3e3});return}if(!i.value){o.add({severity:"warn",summary:"Warning",detail:"Merek harus dipilih",life:3e3});return}if(!n.value){o.add({severity:"warn",summary:"Warning",detail:"Kategori harus dipilih",life:3e3});return}if(!u.value){o.add({severity:"warn",summary:"Warning",detail:"Satuan harus dipilih",life:3e3});return}if(!m.value){o.add({severity:"warn",summary:"Warning",detail:"Kode produk harus diisi",life:3e3});return}if(d.value.length>100){o.add({severity:"warn",summary:"Warning",detail:"Nama produk tidak boleh lebih dari 100 karakter",life:3e3});return}const v={name:d.value,description:c.value,brandId:(t=i.value)==null?void 0:t.id,categoryId:(e=n.value)==null?void 0:e.id,unitId:(a=u.value)==null?void 0:a.id,code:m.value};await C.createProduct(v),o.add({severity:"success",summary:"Sukses",detail:"Produk berhasil dibuat",life:3e3}),f.value?(_(),P()):x()}catch(v){console.error("Error creating product:",v),o.add({severity:"error",summary:"Gagal",detail:v?(B=(U=v.response)==null?void 0:U.data)==null?void 0:B.message:"Terjadi kesalahan saat membuat produk",life:3e3})}};return(t,e)=>(j(),K(G,null,{default:T(()=>[r("form",{class:"flex flex-col p-4 gap-3",onSubmit:E(D,["prevent"])},[r("div",z,[r("div",J,[s(y,{"model-value":m.value,"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),label:"Kode Produk",placeholder:"Kode produk",disabled:""},null,8,["model-value"])]),r("div",L,[s(y,{"model-value":d.value,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),label:"Nama Produk",placeholder:"Masukkan Nama Produk",onBlur:e[2]||(e[2]=()=>{})},null,8,["model-value"])])]),r("div",Q,[r("div",X,[s(y,{"model-value":c.value,"onUpdate:modelValue":e[3]||(e[3]=a=>c.value=a),label:"Deskripsi Produk",placeholder:"Masukkan Deskripsi Produk",mandatory:!1,optional:!0,onBlur:e[4]||(e[4]=()=>{})},null,8,["model-value"])]),r("div",Y,[s(g,{"model-value":i.value,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value=a),placeholder:"Pilih Merek",label:"Merek",options:b.value,onOpen:S,onHide:p},null,8,["model-value","options"])])]),r("div",Z,[r("div",ee,[s(g,{"model-value":n.value,"onUpdate:modelValue":e[6]||(e[6]=a=>n.value=a),placeholder:"Pilih Kategori",label:"Kategori",options:k.value,onOpen:V,onHide:p},null,8,["model-value","options"])]),r("div",ae,[s(g,{"model-value":u.value,"onUpdate:modelValue":e[7]||(e[7]=a=>u.value=a),placeholder:"Pilih Satuan",label:"Satuan",options:w.value,onOpen:M,onHide:p},null,8,["model-value","options"])])]),r("div",te,[r("div",re,[s(q,{"model-value":f.value,"onUpdate:modelValue":e[8]||(e[8]=a=>f.value=a),label:"Tetap di sini?"},null,8,["model-value"]),r("div",{class:"flex gap-2"},[r("button",{type:"button",onClick:x,class:"text-xs rounded-sm !px-2 !py-1 bg-black text-white hover:bg-black/60 hover:cursor-pointer shadow-md border-1 border-gray-600"}," Kembali "),r("button",{type:"button",onClick:_,class:"text-xs rounded-sm !px-2 !py-1 bg-transparent text-red-500 hover:bg-red-500/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-red-500"}," Bersihkan Field "),e[9]||(e[9]=r("button",{type:"submit",class:"text-xs rounded-sm !px-2 !py-1 bg-green-400 text-white hover:bg-green-400/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-green-500"}," Submit ",-1))])])])],32)]),_:1}))}});export{xe as default};
