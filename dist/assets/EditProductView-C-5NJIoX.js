import{_ as U}from"./api.service-Dgs1boU1.js";import{_ as g}from"./Dropdown.vue_vue_type_script_setup_true_lang-6IRzW13W.js";import{_ as f}from"./InputText.vue_vue_type_script_setup_true_lang-e6c03x4O.js";import{P as E}from"./product.service-8g3w9OI2.js";import{u as D,y as O,M as V,v as d,p as I,w as K,o as N,z as o,b as m,E as G}from"./index-DOh3iN_U.js";import{B as H}from"./brand.service-DzclouBH.js";import{C as $}from"./category.service-DKdRWdqU.js";import{U as F}from"./unit.service-Ck8PLPrx.js";import{g as R}from"./data.utils-Cp1LBIu0.js";import"./auth.service-BxJEy6Ur.js";import"./index-HQkD5G-S.js";import"./index-CC8nIHWH.js";import"./index-__IG_7Gg.js";import"./index-QsIXXSH_.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-DO9keWeT.js";const j={class:"flex flex-col p-4 gap-3"},z={class:"flex items-center gap-10"},T={class:"w-[460px]"},q={class:"w-[460px]"},A={class:"flex items-center gap-10"},J={class:"w-[460px]"},L={class:"w-[460px]"},Q={class:"flex items-center gap-10"},W={class:"w-[460px]"},X={class:"w-[460px]"},ve=D({__name:"EditProductView",setup(Y){O(()=>{B(),w(),_(),P()});const M=G(),t=V(),v=d(0),u=d(),n=d(),c=d(),l=d(),i=d(),s=d(),b=d(),h=d(),k=d(),x=()=>{M.push("/product/data")},p=()=>{var a,e,r;u.value=R(v.value,(a=l.value)==null?void 0:a.id,(e=i.value)==null?void 0:e.id,(r=s.value)==null?void 0:r.id)},C=()=>{n.value=void 0,l.value=void 0,c.value=void 0,i.value=void 0,s.value=void 0,p()},w=async()=>{try{const{data:a}=await H.getBrandDropdown();b.value=a.data}catch{t.add({severity:"error",summary:"Error",detail:"Gagal memuat data merek",life:3e3})}},_=async()=>{try{const{data:a}=await $.getCategoryDropdown();h.value=a.data}catch{t.add({severity:"error",summary:"Error",detail:"Gagal memuat data kategori",life:3e3})}},P=async()=>{try{const{data:a}=await F.getUnitDropdown();k.value=a.data}catch{t.add({severity:"error",summary:"Error",detail:"Gagal memuat data satuan",life:3e3})}},B=async()=>{try{const a=sessionStorage.getItem("product");if(!a){t.add({severity:"error",summary:"Error",detail:"ID produk tidak ditemukan",life:3e3});return}const{data:e}=await E.getProductDetail(Number(a));v.value=e.data.id,n.value=e.data.name,c.value=e.data.description,l.value={id:e.data.brand.id,name:e.data.brand.name},i.value={id:e.data.category.id,name:e.data.category.name},s.value={id:e.data.unit.id,name:e.data.unit.name},u.value=e.data.code}catch(a){console.error("Error fetching product detail:",a),t.add({severity:"error",summary:"Error",detail:"Gagal memuat detail produk",life:3e3})}},S=async()=>{var a,e,r;try{if(!n.value){t.add({severity:"error",summary:"Error",detail:"Nama produk harus diisi",life:3e3});return}if(!u.value){t.add({severity:"error",summary:"Error",detail:"Kode produk harus diisi",life:3e3});return}if(!l.value){t.add({severity:"error",summary:"Error",detail:"Merek harus dipilih",life:3e3});return}if(!i.value){t.add({severity:"error",summary:"Error",detail:"Kategori harus dipilih",life:3e3});return}if(!s.value){t.add({severity:"error",summary:"Error",detail:"Satuan harus dipilih",life:3e3});return}const y={name:n.value,code:u.value,description:c.value,brandId:(a=l.value)==null?void 0:a.id,categoryId:(e=i.value)==null?void 0:e.id,unitId:(r=s.value)==null?void 0:r.id};await E.updateProduct(v.value,y),t.add({severity:"success",summary:"Sukses",detail:"Produk berhasil diperbarui",life:3e3}),x()}catch(y){console.error("Error creating product:",y),t.add({severity:"error",summary:"Gagal",detail:"Gagal memperbarui produk",life:3e3})}};return(a,e)=>(N(),I(U,null,{default:K(()=>[o("div",j,[o("div",z,[o("div",T,[m(f,{"model-value":u.value,"onUpdate:modelValue":e[0]||(e[0]=r=>u.value=r),label:"Kode Produk",placeholder:"Kode produk",disabled:""},null,8,["model-value"])]),o("div",q,[m(f,{"model-value":n.value,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value=r),label:"Nama Produk",placeholder:"Masukkan Nama Produk",onBlur:e[2]||(e[2]=()=>{})},null,8,["model-value"])])]),o("div",A,[o("div",J,[m(f,{"model-value":c.value,"onUpdate:modelValue":e[3]||(e[3]=r=>c.value=r),label:"Deskripsi Produk",placeholder:"Masukkan Deskripsi Produk",mandatory:!1,optional:!0,onBlur:e[4]||(e[4]=()=>{})},null,8,["model-value"])]),o("div",L,[m(g,{"model-value":l.value,"onUpdate:modelValue":e[5]||(e[5]=r=>l.value=r),placeholder:"Pilih Merek",label:"Merek",options:b.value,onOpen:w,onHide:p},null,8,["model-value","options"])])]),o("div",Q,[o("div",W,[m(g,{"model-value":i.value,"onUpdate:modelValue":e[6]||(e[6]=r=>i.value=r),placeholder:"Pilih Kategori",label:"Kategori",options:h.value,onOpen:_,onHide:p},null,8,["model-value","options"])]),o("div",X,[m(g,{"model-value":s.value,"onUpdate:modelValue":e[7]||(e[7]=r=>s.value=r),placeholder:"Pilih Satuan",label:"Satuan",options:k.value,onOpen:P,onHide:p},null,8,["model-value","options"])])]),o("div",{class:"flex justify-end pt-8"},[o("div",{class:"flex flex-col gap-4 items-end"},[o("div",{class:"flex gap-2"},[o("button",{onClick:x,class:"text-xs rounded-sm !px-2 !py-1 bg-black text-white hover:bg-black/60 hover:cursor-pointer shadow-md border-1 border-gray-600"}," Kembali "),o("button",{onClick:C,class:"text-xs rounded-sm !px-2 !py-1 bg-transparent text-red-500 hover:bg-red-500/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-red-500"}," Bersihkan Field "),o("button",{onClick:S,class:"text-xs rounded-sm !px-2 !py-1 bg-green-400 text-white hover:bg-green-400/60 hover:text-white hover:cursor-pointer shadow-md border-1 border-green-500"}," Submit ")])])])])]),_:1}))}});export{ve as default};
