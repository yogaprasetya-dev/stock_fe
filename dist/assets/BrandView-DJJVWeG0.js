import{_ as P}from"./DataTable.vue_vue_type_script_setup_true_lang-BS6nFKDe.js";import{B as x}from"./brand.service-CdC4MYL7.js";import{_ as H}from"./Dialog.vue_vue_type_script_setup_true_lang-SEnvciqK.js";import{e as k}from"./index-CFjhT2rJ.js";import{_ as J}from"./InputText.vue_vue_type_script_setup_true_lang-Bf-LJ2fh.js";import{f as T}from"./data.utils-eGwCzW_2.js";import{_ as L}from"./DialogConfirm.vue_vue_type_style_index_0_lang-DUBGJrNn.js";import{_ as R}from"./ButtonMultiAction.vue_vue_type_script_setup_true_lang-3_kUtBdt.js";import{_ as $}from"./Button.vue_vue_type_script_setup_true_lang-CCMaiNve.js";import{_ as W}from"./Card.vue_vue_type_script_setup_true_lang-Bl0DslN5.js";import{_ as j,a as I}from"./ButtonSearch.vue_vue_type_script_setup_true_lang-4XNYGFSZ.js";import{u as G,v as u,a6 as q,G as z,M as K,q as Q,a7 as X,o as C,c as O,a8 as Y,y as _,b,O as Z,J as U,L as S,N as ee,w as V,F as ae,p as te,t as le,x as se}from"./index-BGCjVxet.js";import{_ as E}from"./DatePicker.vue_vue_type_script_setup_true_lang-BCQAJcoL.js";import"./Icon.vue_vue_type_script_setup_true_lang-CRD0Yvi0.js";import"./Animation-tEbJ7J_3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BOijICIK.js";import"./InputGroup.vue_vue_type_script_setup_true_lang-D-XmK6Ot.js";import"./index-BdQHsZDF.js";import"./index-Di0XHDVR.js";import"./index-c5Mf9KwK.js";import"./api.service-DGtXVYHe.js";import"./index-MGwmnnen.js";import"./index-Bs_0ViQP.js";import"./index-cMUTYv_7.js";import"./index-CVP-yJEY.js";const ie={class:"flex items-end justify-end gap-2","data-wv-section":"filteractionbuttons",style:{"grid-area":"2/4"}},re=G({inheritAttrs:!1,__name:"BrandFilterFields",props:{tableName:{default:"product-table"}},emits:["apply"],setup(F,{emit:s}){const r=u(4),n=u(),d=u(),f=u(),i=u([]),m=u([]),c=q(!1),w=u(null),g=F,B=s;z(()=>{M(),k.on("show-filter",N)}),K(()=>{k.off("show-filter",N)});const A=()=>{const t={};if(k.emit("multi-select:hide-overlay"),n.value&&n.value.length>0&&(t.brand=JSON.stringify(n.value)),d.value&&d.value.length>0&&(t.category=JSON.stringify(d.value)),f.value&&f.value.length>0&&(t.unit=JSON.stringify(f.value)),i.value&&i.value.length>0){const o=i.value[0]?new Date(i.value[0]):null,v=i.value[1]?new Date(i.value[1]):new Date(i.value[0]),y=[o];v&&y.push(v),t.updatedAt=JSON.stringify(y)}if(m.value&&m.value.length>0){const o=m.value[0]?new Date(m.value[0]):null,v=m.value[1]?new Date(m.value[1]):new Date(m.value[0]),y=[o];v&&y.push(v),t.createdAt=JSON.stringify(y)}k.emit("data-table:apply-filter",{tableName:g==null?void 0:g.tableName,filter:t}),k.emit("data-table:clear-selected-data",{tableName:g==null?void 0:g.tableName}),B==null||B("apply",t)},D=()=>{i.value=[],m.value=[]},N=t=>{t.tableName===g.tableName&&(c.value=t.show)},M=()=>{if(w.value){const{children:t}=w.value,o=w.value.childElementCount,v=o%r.value;let[y,e]=[1,1];for(const a in Array.from({length:o})){const l=Number(a)===o-1;t[a].setAttribute("style",`grid-area: ${y}/${l&&v?r.value:e}`),++e>r.value&&(e=1,y++)}}};return(t,o)=>Q((C(),O("div",{ref_key:"container",ref:w,class:"grid gap-4 py-2 bg-[#5080e1]/10 rounded-md px-3",style:Y(`grid-template-columns: repeat(${r.value}, 1fr)`)},[_("div",null,[b(E,{"model-value":i.value,"onUpdate:modelValue":o[0]||(o[0]=v=>i.value=v),label:"Terakhir Diubah",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),_("div",null,[b(E,{"model-value":m.value,"onUpdate:modelValue":o[1]||(o[1]=v=>m.value=v),label:"Dibuat Pada",placeholder:"Pilih Tanggal",showIcon:"",fluid:"","selection-mode":"range",iconDisplay:"input"},null,8,["model-value"])]),_("div",ie,[b($,{onClick:D,label:"Bersihkan Filter","data-wv-section":"clearbutton",severity:"secondary",class:"text-xs"}),b($,{onClick:A,label:"Terapkan Filter","data-wv-section":"applybutton",severity:"success",class:"text-xs"})])],4)),[[X,c.value]])}}),ne={class:"flex flex-col gap-2 text-black"},oe={class:"flex flex-col gap-2"},ue={class:"flex flex-row justify-start gap-2"},de={class:"w-full flex justify-end gap-2"},me={class:"w-full"},Oe=G({__name:"BrandView",setup(F){const s=u({visible:!1,type:"add",header:"",useStay:!1}),r=Z(),n=u(),d=u(),f=u([]),i=u([]),m=u(!1),c=u({visible:!1,header:"",severity:"success",confirmButtonSeverity:"success"}),w=U(()=>[{label:"Edit",icon:"edit",visible:S("brand").update,command:()=>{var e;s.value={visible:!0,type:"edit",header:"Edit Merek",useStay:!1},n.value=(e=d.value)==null?void 0:e.name}},{label:"Hapus",icon:"delete-bin",danger:!0,visible:S("brand").delete,command:()=>{i.value=[d.value],c.value={visible:!0,header:"Hapus Merek",severity:"error",confirmButtonSeverity:"danger",message:"Apakah kamu yakin ingin menghapus merek ini?",list:i.value.map(e=>e.name),confirmLabel:"Hapus",actionable:!0}}}]),g=U(()=>[{label:"Hapus",icon:"delete-bin",visible:S("brand").delete,danger:!0,command:()=>{i.value=f.value,c.value={visible:!0,header:"Hapus Merek",severity:"error",confirmButtonSeverity:"danger",message:"Apakah kamu yakin ingin menghapus merek ini?",list:i.value.map(e=>e.name),confirmLabel:"Hapus",actionable:!0}}}]),B=[{header:"Merek",field:"name",sortable:!0},{header:"Terakhir Diubah",field:"updatedAt",sortable:!0,bodyTemplate:e=>e.updatedAt?T(new Date(e.updatedAt)):"-"},{header:"Dibuat Pada",field:"createdAt",sortable:!0,bodyTemplate:e=>e.createdAt?T(new Date(e.createdAt)):"-"}],A=()=>{s.value={visible:!0,type:"add",header:"Tambah Merek"}},D=async e=>{try{const{data:a}=await x.getBrand(e);return a}catch(a){console.error("Error fetching data:",a)}},N=e=>{s.value.type==="add"?(m.value=(e==null?void 0:e.stay)??!1,o()):s.value.type==="edit"&&v()},M=async()=>{await y(i.value.map(e=>e.id))},t=()=>{n.value=void 0},o=async()=>{var e,a;try{if(!n.value){r.add({severity:"warn",summary:"Warning",detail:"Nama merek tidak boleh kosong",life:3e3});return}if(n.value.length>30){r.add({severity:"warn",summary:"Warning",detail:"Nama merek tidak boleh lebih dari 30 karakter",life:3e3});return}const l={name:n.value};await x.createBrand(l),m.value?s.value.visible=!0:s.value.visible=!1,t(),d.value=void 0,f.value=[],r.add({severity:"success",summary:"Sukses",detail:"Berhasil menambah merek",life:3e3}),k.emit("data-table:update",{tableName:"table-brand"})}catch(l){console.error("Error creating brand:",l),r.add({severity:"error",summary:"Gagal",detail:l?(a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message:"Gagal menambah merek",life:3e3})}},v=async()=>{var e,a;try{if(!n.value||!d.value){r.add({severity:"warn",summary:"Warning",detail:"Nama merek harus diisi",life:3e3});return}if(n.value.length>30){r.add({severity:"warn",summary:"Warning",detail:"Nama merek tidak boleh lebih dari 30 karakter",life:3e3});return}await x.updateBrand(d.value.id,{name:n.value}),t(),s.value.visible=!1,d.value=void 0,f.value=[],r.add({severity:"success",summary:"Sukses",detail:"Berhasil mengubah merek",life:3e3}),k.emit("data-table:update",{tableName:"table-brand"})}catch(l){console.error("Error updating brand:",l),r.add({severity:"error",summary:"Gagal",detail:l?(a=(e=l.response)==null?void 0:e.data)==null?void 0:a.message:"Gagal mengubah merek",life:3e3})}},y=async e=>{var a,l;try{const h={id:e};await x.deleteBrand(h),c.value.visible=!1,r.add({severity:"success",summary:"Sukses",detail:"Berhasil menghapus merek",life:3e3}),d.value=void 0,f.value=[],k.emit("data-table:update",{tableName:"table-brand"})}catch(h){console.error("Error deleting brand:",h),r.add({severity:"error",summary:"Gagal",detail:h?(l=(a=h.response)==null?void 0:a.data)==null?void 0:l.message:"Gagal menghapus merek",life:3e3})}};return ee(()=>s.value.visible,()=>{s.value.visible||(t(),d.value=void 0,f.value=[])},{immediate:!0}),(e,a)=>{var l,h;return C(),O(ae,null,[b(W,null,{default:V(()=>[_("div",ne,[_("div",oe,[_("div",ue,[b(R,{"selected-data":f.value,"onUpdate:selectedData":a[0]||(a[0]=p=>f.value=p),options:g.value,"table-name":"table-brand"},null,8,["selected-data","options"]),_("div",de,[b(j,{"table-name":"table-brand"}),b(I,{"table-name":"table-brand"}),se(S)("brand").create?(C(),te($,{key:0,onClick:A,label:"Tambah Merek",severity:"primary",class:"text-xs"})):le("",!0)])]),b(re,{"table-name":"table-brand"}),b(P,{"data-key":"id","fetch-function":D,columns:B,options:w.value,onToggleOption:a[1]||(a[1]=p=>d.value=p),"onUpdate:selectedData":a[2]||(a[2]=p=>f.value=p),"table-name":"table-brand","selection-type":"checkbox","use-paginator":""},null,8,["options"])])])]),_:1}),b(H,{visible:s.value.visible,"onUpdate:visible":[a[4]||(a[4]=p=>s.value.visible=p),s.value.visible],header:(l=s.value)==null?void 0:l.header,class:"w-[400px] !bg-white !border-none text-black","use-stay":(h=s.value)==null?void 0:h.useStay,"use-close":!0,closable:!1,onSubmit:N},{default:V(()=>[_("div",me,[b(J,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=p=>n.value=p),label:"Nama Merek",placeholder:"Masukkan nama merek"},null,8,["modelValue"])])]),_:1},8,["visible","header","use-stay","onUpdate:visible"]),b(L,{visible:c.value.visible,"onUpdate:visible":a[5]||(a[5]=p=>c.value.visible=p),onConfirm:M,header:c.value.header,"header-icon":"check",list:c.value.list,message:c.value.message,severity:c.value.severity,"confirm-button-severity":c.value.confirmButtonSeverity},null,8,["visible","header","list","message","severity","confirm-button-severity"])],64)}}});export{Oe as default};
