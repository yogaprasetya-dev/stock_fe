import{a as c,c as i}from"./index-D3QVXGA5.js";import{al as p,am as u,an as h,ao as A,ap as f}from"./index-DuqMkg4i.js";const l=i.apiURL,o=c.create({baseURL:`${l}/api/v1/`,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{const s=p();return s&&(e.headers.Authorization=`Bearer ${s}`),e});o.interceptors.response.use(e=>e,async e=>{var t,a,r;const s=e.config,n=((t=s==null?void 0:s.url)==null?void 0:t.startsWith("/api/v1/auth/login"))||((a=s==null?void 0:s.url)==null?void 0:a.startsWith("/api/v1/auth/refresh"));return((r=e.response)==null?void 0:r.status)===401&&!s._retry&&!n&&(s._retry=!0,u(),h(),A(),f.push("/auth/login")),Promise.reject(e)});export{o as A};
